<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=28536&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Git笔记 | Lucky&#39;s blog</title>
<meta name="keywords" content="Git">
<meta name="description" content="Git 笔记 Git 是什么 Git 是一个开源的分布式版本控制系统，用于敏捷高效地处理任何或小或大的项目。
Git 是 Linus Torvalds 为了帮助管理 Linux 内核开发而开发的一个开放源码的版本控制软件。
Git 与常用的版本控制工具 CVS，Subversion 等不同，它采用了分布式版本库的方式，不必服务器端软件支持。
Git 不仅仅是个版本控制系统，它也是个内容管理系统（CMS），工作管理系统等。
Git 安装配置 在使用 Git 前我们需要先安装 Git。Git 目前支持 Linux/Unix、Solaris、Mac 和 Windows 平台上运行。
Git 各平台安装包下载地址为：http://git-scm.com/downloads
::: tip 说明
本笔记主要以 Linux 平台为主
Git 的工作需要调用 curl，zlib，openssl，expat，libiconv 等库的代码，所以需要先安装这些依赖工具。
:::
各 Linux 系统可以使用其安装包管理工具（apt-get、yum 等）进行安装：
Debian/Ubuntu 如果你使用的系统是 Debian/Ubuntu， Git 安装命令为：
1 2 3 4 $ apt-get install libcurl4-gnutls-dev libexpat1-dev gettext libz-dev libssl-dev $ apt-get install git $ git --version git version 1.">
<meta name="author" content="Lucky">
<link rel="canonical" href="http://localhost:28536/posts/it/git/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.13162905251adb4d32d8d37aa30b49fcbfdb3493c30440c4e46cee3669beaa72.css" integrity="sha256-ExYpBSUa200y2NN6owtJ/L/bNJPDBEDE5GzuNmm&#43;qnI=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:28536/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:28536/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:28536/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:28536/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:28536/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="http://localhost:28536/posts/it/git/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
  

<meta property="og:url" content="http://localhost:28536/posts/it/git/">
  <meta property="og:site_name" content="Lucky&#39;s blog">
  <meta property="og:title" content="Git笔记">
  <meta property="og:description" content="Git 笔记 Git 是什么 Git 是一个开源的分布式版本控制系统，用于敏捷高效地处理任何或小或大的项目。
Git 是 Linus Torvalds 为了帮助管理 Linux 内核开发而开发的一个开放源码的版本控制软件。
Git 与常用的版本控制工具 CVS，Subversion 等不同，它采用了分布式版本库的方式，不必服务器端软件支持。
Git 不仅仅是个版本控制系统，它也是个内容管理系统（CMS），工作管理系统等。
Git 安装配置 在使用 Git 前我们需要先安装 Git。Git 目前支持 Linux/Unix、Solaris、Mac 和 Windows 平台上运行。
Git 各平台安装包下载地址为：http://git-scm.com/downloads
::: tip 说明
本笔记主要以 Linux 平台为主
Git 的工作需要调用 curl，zlib，openssl，expat，libiconv 等库的代码，所以需要先安装这些依赖工具。
:::
各 Linux 系统可以使用其安装包管理工具（apt-get、yum 等）进行安装：
Debian/Ubuntu 如果你使用的系统是 Debian/Ubuntu， Git 安装命令为：
1 2 3 4 $ apt-get install libcurl4-gnutls-dev libexpat1-dev gettext libz-dev libssl-dev $ apt-get install git $ git --version git version 1.">
  <meta property="og:locale" content="zh">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2021-06-24T00:00:00+00:00">
    <meta property="article:modified_time" content="2021-06-24T00:00:00+00:00">
    <meta property="article:tag" content="Git">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Git笔记">
<meta name="twitter:description" content="Git 笔记 Git 是什么 Git 是一个开源的分布式版本控制系统，用于敏捷高效地处理任何或小或大的项目。
Git 是 Linus Torvalds 为了帮助管理 Linux 内核开发而开发的一个开放源码的版本控制软件。
Git 与常用的版本控制工具 CVS，Subversion 等不同，它采用了分布式版本库的方式，不必服务器端软件支持。
Git 不仅仅是个版本控制系统，它也是个内容管理系统（CMS），工作管理系统等。
Git 安装配置 在使用 Git 前我们需要先安装 Git。Git 目前支持 Linux/Unix、Solaris、Mac 和 Windows 平台上运行。
Git 各平台安装包下载地址为：http://git-scm.com/downloads
::: tip 说明
本笔记主要以 Linux 平台为主
Git 的工作需要调用 curl，zlib，openssl，expat，libiconv 等库的代码，所以需要先安装这些依赖工具。
:::
各 Linux 系统可以使用其安装包管理工具（apt-get、yum 等）进行安装：
Debian/Ubuntu 如果你使用的系统是 Debian/Ubuntu， Git 安装命令为：
1 2 3 4 $ apt-get install libcurl4-gnutls-dev libexpat1-dev gettext libz-dev libssl-dev $ apt-get install git $ git --version git version 1.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "文章",
      "item": "http://localhost:28536/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Git笔记",
      "item": "http://localhost:28536/posts/it/git/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Git笔记",
  "name": "Git笔记",
  "description": "Git 笔记 Git 是什么 Git 是一个开源的分布式版本控制系统，用于敏捷高效地处理任何或小或大的项目。\nGit 是 Linus Torvalds 为了帮助管理 Linux 内核开发而开发的一个开放源码的版本控制软件。\nGit 与常用的版本控制工具 CVS，Subversion 等不同，它采用了分布式版本库的方式，不必服务器端软件支持。\nGit 不仅仅是个版本控制系统，它也是个内容管理系统（CMS），工作管理系统等。\nGit 安装配置 在使用 Git 前我们需要先安装 Git。Git 目前支持 Linux/Unix、Solaris、Mac 和 Windows 平台上运行。\nGit 各平台安装包下载地址为：http://git-scm.com/downloads\n::: tip 说明\n本笔记主要以 Linux 平台为主\nGit 的工作需要调用 curl，zlib，openssl，expat，libiconv 等库的代码，所以需要先安装这些依赖工具。\n:::\n各 Linux 系统可以使用其安装包管理工具（apt-get、yum 等）进行安装：\nDebian/Ubuntu 如果你使用的系统是 Debian/Ubuntu， Git 安装命令为：\n1 2 3 4 $ apt-get install libcurl4-gnutls-dev libexpat1-dev gettext libz-dev libssl-dev $ apt-get install git $ git --version git version 1.",
  "keywords": [
    "Git"
  ],
  "articleBody": "Git 笔记 Git 是什么 Git 是一个开源的分布式版本控制系统，用于敏捷高效地处理任何或小或大的项目。\nGit 是 Linus Torvalds 为了帮助管理 Linux 内核开发而开发的一个开放源码的版本控制软件。\nGit 与常用的版本控制工具 CVS，Subversion 等不同，它采用了分布式版本库的方式，不必服务器端软件支持。\nGit 不仅仅是个版本控制系统，它也是个内容管理系统（CMS），工作管理系统等。\nGit 安装配置 在使用 Git 前我们需要先安装 Git。Git 目前支持 Linux/Unix、Solaris、Mac 和 Windows 平台上运行。\nGit 各平台安装包下载地址为：http://git-scm.com/downloads\n::: tip 说明\n本笔记主要以 Linux 平台为主\nGit 的工作需要调用 curl，zlib，openssl，expat，libiconv 等库的代码，所以需要先安装这些依赖工具。\n:::\n各 Linux 系统可以使用其安装包管理工具（apt-get、yum 等）进行安装：\nDebian/Ubuntu 如果你使用的系统是 Debian/Ubuntu， Git 安装命令为：\n1 2 3 4 $ apt-get install libcurl4-gnutls-dev libexpat1-dev gettext libz-dev libssl-dev $ apt-get install git $ git --version git version 1.8.1.2 Centos/RedHat 如果你使用的系统是 Centos/RedHat， Git 安装命令为：\n1 2 3 4 $ yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel $ yum -y install git-core $ git --version git version 1.7.1 源码安装 我们也可以在官网下载源码包来安装，最新源码包下载地址：https://git-scm.com/download\n安装指定系统的依赖包：\n1 2 3 4 5 ########## Centos/RedHat ########## $ yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel ########## Debian/Ubuntu ########## $ apt-get install libcurl4-gnutls-dev libexpat1-dev gettext libz-dev libssl-dev 解压安装下载的源码包：\n1 2 3 4 5 $ wget https://www.kernel.org/pub/software/scm/git/git-2.32.0.tar.gz $ tar -zxf git-2.32.0.tar.gz $ cd git-2.32.0 $ make prefix=/usr/local all $ sudo make prefix=/usr/local install Git 配置 Git 提供了一个叫做 git config 的工具，专门用来配置或读取相应的工作环境变量。\n这些环境变量，决定了 Git 在各个环节的具体工作方式和行为。这些变量可以存放在以下三个不同的地方：\n/etc/gitconfig 文件：系统中对所有用户都普遍适用的配置。若使用 git config 时用 –system 选项，读写的就是这个文件。 ~/.gitconfig 文件：用户目录下的配置文件只适用于该用户。若使用 git config 时用 –global 选项，读写的就是这个文件。 当前项目的 Git 目录中的配置文件（也就是工作目录中的 .git/config 文件）：这里的配置仅仅针对当前项目有效。每一个级别的配置都会覆盖上层的相同配置，所以 .git/config 里的配置会覆盖 /etc/gitconfig 中的同名变量。 此外，Git 还会尝试找寻 /etc/gitconfig 文件，只不过看当初 Git 装在什么目录，就以此作为根目录来定位。\n用户信息 配置个人的用户名称和电子邮件地址：\n1 2 $ git config --global user.name \"runoob\" $ git config --global user.email test@runoob.com 如果用了 –global 选项，那么更改的配置文件就是位于你用户主目录下的那个，以后你所有的项目都会默认使用这里配置的用户信息。\n如果要在某个特定的项目中使用其他名字或者电邮，只要去掉 –global 选项重新配置即可，新的设定保存在当前项目的 .git/config 文件里。\n文本编辑器 设置Git默认使用的文本编辑器，一般可能会是 Vi 或者 Vim。如果你有其他偏好，比如 Emacs 的话，可以重新设置：\n1 $ git config --global core.editor emacs 差异分析工具 还有一个比较常用的是，在解决合并冲突时使用哪种差异分析工具。比如要改用 vimdiff 的话：\n1 $ git config --global merge.tool vimdiff Git 可以理解 kdiff3，tkdiff，meld，xxdiff，emerge，vimdiff，gvimdiff，ecmerge，和 opendiff 等合并工具的输出信息。\n当然，你也可以指定使用自己开发的工具。\n查看配置信息 要检查已有的配置信息，可以使用 git config --list 命令：\n1 2 3 4 $ git config --list http.postbuffer=2M user.name=runoob user.email=test@runoob.com 有时候会看到重复的变量名，那就说明它们来自不同的配置文件（比如 /etc/gitconfig 和 ~/.gitconfig），不过最终 Git 实际采用的是最后一个。\n这些配置我们也可以在 ~/.gitconfig 或 /etc/gitconfig 看到，如下所示：\n1 vim ~/.gitconfig 显示内容如下所示：\n1 2 3 4 5 [http] postBuffer = 2M [user] name = runoob email = test@runoob.com 也可以直接查阅某个环境变量的设定，只要把特定的名字跟在后面即可，像这样：\n1 2 $ git config user.name runoob Git 工作流程 一般工作流程如下：\n克隆 Git 资源作为工作目录。 在克隆的资源上添加或修改文件。 如果其他人修改了，你可以更新资源。 在提交前查看修改。 提交修改。 在修改完成后，如果发现错误，可以撤回提交并再次修改并提交。 下图展示了 Git 的工作流程：\nGit 工作区、暂存区和版本库 基本概念 我们先来理解下 Git 工作区、暂存区和版本库概念：\n工作区：就是你在电脑里能看到的目录。\n暂存区：英文叫 stage 或 index。一般存放在 .git 目录下的 index 文件（.git/index）中，所以我们把暂存区有时也叫作索引（index）。\n版本库：工作区有一个隐藏目录 .git，这个不算工作区，而是 Git 的版本库。\n下面这个图展示了工作区、版本库中的暂存区和版本库之间的关系：\n图中左侧为工作区，右侧为版本库。在版本库中标记为 “index” 的区域是暂存区（stage/index），标记为 “master” 的是 master 分支所代表的目录树。 图中我们可以看出此时 “HEAD” 实际是指向 master 分支的一个\"游标\"。所以图示的命令中出现 HEAD 的地方可以用 master 来替换。 图中的 objects 标识的区域为 Git 的对象库，实际位于 “.git/objects” 目录下，里面包含了创建的各种对象及内容。 当对工作区修改（或新增）的文件执行 git add 命令时，暂存区的目录树被更新，同时工作区修改（或新增）的文件内容被写入到对象库中的一个新的对象中，而该对象的 ID 被记录在暂存区的文件索引中。 当执行提交操作（git commit）时，暂存区的目录树写到版本库（对象库）中，master 分支会做相应的更新。即 master 指向的目录树就是提交时暂存区的目录树。 当执行 git reset HEAD 命令时，暂存区的目录树会被重写，被 master 分支指向的目录树所替换，但是工作区不受影响。 当执行 git rm --cached 命令时，会直接从暂存区删除文件，工作区则不做出改变。 当执行 git checkout . 或者 git checkout -- 命令时，会用暂存区全部或指定的文件替换工作区的文件。这个操作很危险，会清除工作区中未添加到暂存区的改动。 当执行 git checkout HEAD . 或者 git checkout HEAD 命令时，会用 HEAD 指向的 master 分支中的全部或者部分文件替换暂存区和以及工作区中的文件。这个命令也是极具危险性的，因为不但会清除工作区中未提交的改动，也会清除暂存区中未提交的改动。 Git 创建仓库 本章节我们将为大家介绍如何创建一个 Git 仓库。\n你可以使用一个已经存在的目录作为Git仓库。\ngit init Git 使用 git init 命令来初始化一个 Git 仓库，Git 的很多命令都需要在 Git 的仓库中运行，所以 git init 是使用 Git 的第一个命令。\n在执行完成 git init 命令后，Git 仓库会生成一个 .git 目录，该目录包含了资源的所有元数据，其他的项目目录保持不变。\n使用方法 使用当前目录作为Git仓库，我们只需使它初始化。\n1 git init 该命令执行完后会在当前目录生成一个 .git 目录。\n使用我们指定目录作为Git仓库。\n1 git init newrepo 初始化后，会在 newrepo 目录下会出现一个名为 .git 的目录，所有 Git 需要的数据和资源都存放在这个目录中。\n如果当前目录下有几个文件想要纳入版本控制，需要先用 git add 命令告诉 Git 开始对这些文件进行跟踪，然后提交：\n1 2 3 $ git add *.c $ git add README $ git commit -m '初始化项目版本' 以上命令将目录下以 .c 结尾及 README 文件提交到仓库中。\n::: tip 注\n在 Linux 系统中，commit 信息使用单引号 ’，Windows 系统，commit 信息使用双引号 \"。\n所以在 git bash 中 git commit -m '提交说明' 这样是可以的，在 Windows 命令行中就要使用双引号 git commit -m \"提交说明\"。\n:::\ngit clone 我们使用 git clone 从现有 Git 仓库中拷贝项目。\n克隆仓库的命令格式为：\n1 git clone 如果我们需要克隆到指定的目录，可以使用以下命令格式：\n1 git clone 参数说明：\n**repo：**Git 仓库。 **directory：**本地目录。 比如，要克隆 Ruby 语言的 Git 代码仓库 Grit，可以用下面的命令：\n1 $ git clone git://github.com/schacon/grit.git 执行该命令后，会在当前目录下创建一个名为 grit 的目录，其中包含一个 .git 的目录，用于保存下载下来的所有版本记录。\n如果要自己定义要新建的项目目录名称，可以在上面的命令末尾指定新的名字：\n1 $ git clone git://github.com/schacon/grit.git mygrit 配置 git 的设置使用 git config 命令。\n显示当前的 git 配置信息：\n1 2 3 4 5 6 7 8 $ git config --list credential.helper=osxkeychain core.repositoryformatversion=0 core.filemode=true core.bare=false core.logallrefupdates=true core.ignorecase=true core.precomposeunicode=true 编辑 git 配置文件:\n1 2 $ git config -e # 针对当前仓库 或者：\n1 2 $ git config -e --global # 针对系统上所有仓库 设置提交代码时的用户信息：\n1 2 $ git config --global user.name \"runoob\" $ git config --global user.email test@runoob.com 如果去掉 –global 参数只对当前仓库有效。\nGit 基本操作 Git 的工作就是创建和保存你项目的快照及与之后的快照进行对比。\n本节将对有关创建与提交你的项目快照的命令作介绍。\nGit 常用的是以下 6 个命令：git clone、git push、git add 、git commit、git checkout、git pull，后面我们会详细介绍。\n::: tip 说明\nworkspace：工作区 staging area：暂存区/缓存区 local repository：版本库或本地仓库 remote repository：远程仓库 :::\n一个简单的操作步骤：\n1 2 3 $ git init $ git add . $ git commit git init ：初始化仓库。 git add . ：添加文件到暂存区。 git commit ：将暂存区内容添加到仓库中。 创建仓库命令 下表列出了 git 创建仓库的命令：\n命令 说明 git init 初始化仓库 git clone 拷贝一份远程仓库，也就是下载一个项目。 提交与修改 Git 的工作就是创建和保存你的项目的快照及与之后的快照进行对比。\n下表列出了有关创建与提交你的项目的快照的命令：\n命令 说明 git add 添加文件到仓库 git status 查看仓库当前的状态，显示有变更的文件。 git diff 比较文件的不同，即暂存区和工作区的差异。 git commit 提交暂存区到本地仓库。 git reset 回退版本。 git rm 删除工作区文件。 git mv 移动或重命名工作区文件。 提交日志 命令 说明 git log 查看历史提交记录 git blame 以列表形式查看指定文件的历史修改记录 远程操作 命令 说明 git remote 远程仓库操作 git fetch 从远程获取代码库 git pull 下载远程代码并合并 git push 上传远程代码并合并 Git 分支管理 几乎每一种版本控制系统都以某种形式支持分支。使用分支意味着你可以从开发主线上分离开来，然后在不影响主线的同时继续工作。\n有人把 Git 的分支模型称为必杀技特性，而正是因为它，将 Git 从版本控制系统家族里区分出来。\n创建分支命令：\n1 git branch (branchname) 切换分支命令:\n1 git checkout (branchname) 当你切换分支的时候，Git 会用该分支的最后提交的快照替换你的工作目录的内容， 所以多个分支不需要多个目录。\n合并分支命令:\n1 git merge 你可以多次合并到统一分支， 也可以选择在合并之后直接删除被并入的分支。\n开始前我们先创建一个测试目录：\n1 2 3 4 5 6 7 8 9 10 $ mkdir gitdemo $ cd gitdemo/ $ git init Initialized empty Git repository... $ touch README $ git add README $ git commit -m '第一次版本提交' [master (root-commit) 3b58100] 第一次版本提交 1 file changed, 0 insertions(+), 0 deletions(-) create mode 100644 README 列出分支 列出分支基本命令：\n1 git branch 没有参数时，git branch 会列出你在本地的分支。\n1 2 $ git branch * master 此例的意思就是，我们有一个叫做 master 的分支，并且该分支是当前分支。\n当你执行 git init 的时候，默认情况下 Git 就会为你创建 master 分支。\n如果我们要手动创建一个分支。执行 git branch (branchname) 即可。\n1 2 3 4 $ git branch testing $ git branch * master testing 现在我们可以看到，有了一个新分支 testing。\n当你以此方式在上次提交更新之后创建了新分支，如果后来又有更新提交， 然后又切换到了 testing 分支，Git 将还原你的工作目录到你创建分支时候的样子。\n接下来我们将演示如何切换分支，我们用 git checkout (branch) 切换到我们要修改的分支。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 $ ls README $ echo 'runoob.com' \u003e test.txt $ git add . $ git commit -m 'add test.txt' [master 3e92c19] add test.txt 1 file changed, 1 insertion(+) create mode 100644 test.txt $ ls README test.txt $ git checkout testing Switched to branch 'testing' $ ls README 当我们切换到 testing 分支的时候，我们添加的新文件 test.txt 被移除了。切换回 master 分支的时候，它们有重新出现了。\n1 2 3 4 $ git checkout master Switched to branch 'master' $ ls README test.txt 我们也可以使用 git checkout -b (branchname) 命令来创建新分支并立即切换到该分支下，从而在该分支中操作。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 $ git checkout -b newtest Switched to a new branch 'newtest' $ git rm test.txt rm 'test.txt' $ ls README $ touch runoob.php $ git add . $ git commit -am 'removed test.txt、add runoob.php' [newtest c1501a2] removed test.txt、add runoob.php 2 files changed, 1 deletion(-) create mode 100644 runoob.php delete mode 100644 test.txt $ ls README runoob.php $ git checkout master Switched to branch 'master' $ ls README test.txt 如你所见，我们创建了一个分支，在该分支的上移除了一些文件 test.txt，并添加了 runoob.php 文件，然后切换回我们的主分支，删除的 test.txt 文件又回来了，且新增加的 runoob.php 不存在主分支中。\n使用分支将工作切分开来，从而让我们能够在不同开发环境中做事，并来回切换。\n删除分支 删除分支命令：\n1 git branch -d (branchname) 例如我们要删除 testing 分支：\n1 2 3 4 5 6 7 $ git branch * master testing $ git branch -d testing Deleted branch testing (was 85fc7e7). $ git branch * master 分支合并 一旦某分支有了独立内容，你终究会希望将它合并回到你的主分支。 你可以使用以下命令将任何分支合并到当前分支中去：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 git merge $ git branch * master newtest $ ls README test.txt $ git merge newtest Updating 3e92c19..c1501a2 Fast-forward runoob.php | 0 test.txt | 1 - 2 files changed, 1 deletion(-) create mode 100644 runoob.php delete mode 100644 test.txt $ ls README runoob.php 以上实例中我们将 newtest 分支合并到主分支去，test.txt 文件被删除。\n合并完后就可以删除分支:\n1 2 $ git branch -d newtest Deleted branch newtest (was c1501a2). 删除后， 就只剩下 master 分支了：\n1 2 $ git branch * master 合并冲突 合并并不仅仅是简单的文件添加、移除的操作，Git 也会合并修改。\n1 2 3 $ git branch * master $ cat runoob.php 首先，我们创建一个叫做 change_site 的分支，切换过去，我们将 runoob.php 内容改为:\n1 2 3 \u003c?php echo 'runoob'; ?\u003e 创建 change_site 分支：\n1 2 3 4 5 6 7 8 9 10 11 $ git checkout -b change_site Switched to a new branch 'change_site' $ vim runoob.php $ head -3 runoob.php \u003c?php echo 'runoob'; ?\u003e $ git commit -am 'changed the runoob.php' [change_site 7774248] changed the runoob.php 1 file changed, 3 insertions(+) 将修改的内容提交到 change_site 分支中。 现在，假如切换回 master 分支我们可以看内容恢复到我们修改前的(空文件，没有代码)，我们再次修改 runoob.php 文件。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 $ git checkout master Switched to branch 'master' $ cat runoob.php $ vim runoob.php # 修改内容如下 $ cat runoob.php \u003c?php echo 1; ?\u003e $ git diff diff --git a/runoob.php b/runoob.php index e69de29..ac60739 100644 --- a/runoob.php +++ b/runoob.php @@ -0,0 +1,3 @@ +\u003c?php +echo 1; +?\u003e $ git commit -am '修改代码' [master c68142b] 修改代码 1 file changed, 3 insertions(+) 现在这些改变已经记录到我的 “master” 分支了。接下来我们将 “change_site” 分支合并过来。\n1 2 3 4 5 6 7 8 9 10 11 12 13 $ git merge change_site Auto-merging runoob.php CONFLICT (content): Merge conflict in runoob.php Automatic merge failed; fix conflicts and then commit the result. $ cat runoob.php # 代开文件，看到冲突内容 \u003c?php \u003c\u003c\u003c\u003c\u003c\u003c\u003c HEAD echo 1; ======= echo 'runoob'; \u003e\u003e\u003e\u003e\u003e\u003e\u003e change_site ?\u003e 我们将前一个分支合并到 master 分支，一个合并冲突就出现了，接下来我们需要手动去修改它。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 $ vim runoob.php $ cat runoob.php \u003c?php echo 1; echo 'runoob'; ?\u003e $ git diff diff --cc runoob.php index ac60739,b63d7d7..0000000 --- a/runoob.php +++ b/runoob.php @@@ -1,3 -1,3 +1,4 @@@ \u003c?php +echo 1; + echo 'runoob'; ?\u003e 在 Git 中，我们可以用 git add 要告诉 Git 文件冲突已经解决\n1 2 3 4 5 6 7 $ git status -s UU runoob.php $ git add runoob.php $ git status -s M runoob.php $ git commit [master 88afe0e] Merge branch 'change_site' 现在我们成功解决了合并中的冲突，并提交了结果。\nGit 查看提交历史 Git 提交历史一般常用两个命令：\ngit log：查看历史提交记录。 git blame ：以列表形式查看指定文件的历史修改记录。 git log 在使用 Git 提交了若干更新之后，又或者克隆了某个项目，想回顾下提交历史，我们可以使用 git log 命令查看。\n针对我们前一章节的操作，使用 git log 命令列出历史提交记录如下：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 $ git log commit d5e9fc2c811e0ca2b2d28506ef7dc14171a207d9 (HEAD -\u003e master) Merge: c68142b 7774248 Author: runoob Date: Fri May 3 15:55:58 2019 +0800 Merge branch 'change_site' commit c68142b562c260c3071754623b08e2657b4c6d5b Author: runoob Date: Fri May 3 15:52:12 2019 +0800 修改代码 commit 777424832e714cf65d3be79b50a4717aea51ab69 (change_site) Author: runoob Date: Fri May 3 15:49:26 2019 +0800 changed the runoob.php commit c1501a244676ff55e7cccac1ecac0e18cbf6cb00 Author: runoob Date: Fri May 3 15:35:32 2019 +0800 我们可以用 –oneline 选项来查看历史记录的简洁的版本。\n1 2 3 4 5 6 7 $ git log --oneline d5e9fc2 (HEAD -\u003e master) Merge branch 'change_site' c68142b 修改代码 7774248 (change_site) changed the runoob.php c1501a2 removed test.txt、add runoob.php 3e92c19 add test.txt 3b58100 第一次版本提交 这告诉我们的是，此项目的开发历史。\n我们还可以用 –graph 选项，查看历史中什么时候出现了分支、合并。以下为相同的命令，开启了拓扑图选项：\n1 2 3 4 5 6 7 8 9 $ git log --graph * d5e9fc2 (HEAD -\u003e master) Merge branch 'change_site' |\\ | * 7774248 (change_site) changed the runoob.php * | c68142b 修改代码 |/ * c1501a2 removed test.txt、add runoob.php * 3e92c19 add test.txt * 3b58100 第一次版本提交 现在我们可以更清楚明了地看到何时工作分叉、又何时归并。\n你也可以用 –reverse 参数来逆向显示所有日志。\n1 2 3 4 5 6 7 $ git log --reverse --oneline 3b58100 第一次版本提交 3e92c19 add test.txt c1501a2 removed test.txt、add runoob.php 7774248 (change_site) changed the runoob.php c68142b 修改代码 d5e9fc2 (HEAD -\u003e master) Merge branch 'change_site' 如果只想查找指定用户的提交日志可以使用命令：git log --author , 例如，比方说我们要找 Git 源码中 Linus 提交的部分：\n1 2 3 4 5 6 $ git log --author=Linus --oneline -5 81b50f3 Move 'builtin-*' into a 'builtin/' subdirectory 3bb7256 make \"index-pack\" a built-in 377d027 make \"git pack-redundant\" a built-in b532581 make \"git unpack-file\" a built-in 112dd51 make \"mktag\" a built-in 如果你要指定日期，可以执行几个选项：–since 和 –before，但是你也可以用 –until 和 –after。\n例如，如果我要看 Git 项目中三周前且在四月十八日之后的所有提交，我可以执行这个（我还用了 –no-merges 选项以隐藏合并提交）：\n1 2 3 4 5 6 7 8 9 10 $ git log --oneline --before={3.weeks.ago} --after={2010-04-18} --no-merges 5469e2d Git 1.7.1-rc2 d43427d Documentation/remote-helpers: Fix typos and improve language 272a36b Fixup: Second argument may be any arbitrary string b6c8d2d Documentation/remote-helpers: Add invocation section 5ce4f4e Documentation/urls: Rewrite to accomodate transport::address 00b84e9 Documentation/remote-helpers: Rewrite description 03aa87e Documentation: Describe other situations where -z affects git diff 77bc694 rebase-interactive: silence warning when no commits rewritten 636db2c t3301: add tests to use --format=\"%N\" 更多 git log 命令可查看：http://git-scm.com/docs/git-log\ngit blame 如果要查看指定文件的修改记录可以使用 git blame 命令，格式如下：\n1 git blame git blame 命令是以列表形式显示修改记录，如下实例：\n1 2 3 $ git blame README ^d2097aa (tianqixin 2020-08-25 14:59:25 +0800 1) # Runoob Git 测试 db9315b0 (runoob 2020-08-25 16:00:23 +0800 2) # 菜鸟教程 Git 标签 如果你达到一个重要的阶段，并希望永远记住那个特别的提交快照，你可以使用 git tag 给它打上标签。\n比如说，我们想为我们的 runoob 项目发布一个\"1.0\"版本。 我们可以用 git tag -a v1.0 命令给最新一次提交打上（HEAD）“v1.0\"的标签。\n-a 选项意为\"创建一个带注解的标签”。 不用 -a 选项也可以执行的，但它不会记录这标签是啥时候打的，谁打的，也不会让你添加个标签的注解。 我推荐一直创建带注解的标签。\n1 $ git tag -a v1.0 当你执行 git tag -a 命令时，Git 会打开你的编辑器，让你写一句标签注解，就像你给提交写注解一样。\n现在，注意当我们执行 git log --decorate 时，我们可以看到我们的标签了：\n1 2 3 4 5 6 7 8 9 $ git log --decorate * d5e9fc2 (HEAD -\u003e master) Merge branch 'change_site' |\\ | * 7774248 (change_site) changed the runoob.php * | c68142b 修改代码 |/ * c1501a2 removed test.txt、add runoob.php * 3e92c19 add test.txt * 3b58100 第一次版本提交 如果我们忘了给某个提交打标签，又将它发布了，我们可以给它追加标签。\n例如，假设我们发布了提交 85fc7e7(上面实例最后一行)，但是那时候忘了给它打标签。 我们现在也可以：\n1 2 3 4 5 6 7 8 9 10 $ git tag -a v0.9 85fc7e7 $ git log --oneline --decorate --graph * d5e9fc2 (HEAD -\u003e master) Merge branch 'change_site' |\\ | * 7774248 (change_site) changed the runoob.php * | c68142b 修改代码 |/ * c1501a2 removed test.txt、add runoob.php * 3e92c19 add test.txt * 3b58100 (tag: v0.9) 第一次版本提交 如果我们要查看所有标签可以使用以下命令：\n1 2 3 $ git tag v0.9 v1.0 指定标签信息命令：\n1 git tag -a -m \"runoob.com标签\" PGP签名标签命令：\n1 git tag -s -m \"runoob.com标签\" Git 远程仓库（GitHub） 目前我们使用到的 Git 命令都是在本地执行，如果你想通过 Git 分享你的代码或者与其他开发人员合作。 你就需要将数据放到一台其他开发人员能够连接的服务器上。\n本例使用了 Github 作为远程仓库，你可以先阅读我们的 Github 简明教程。\n添加远程库 要添加一个新的远程仓库，可以指定一个简单的名字，以便将来引用,命令格式如下：\n1 git remote add [shortname] [url] 本例以 Github 为例作为远程仓库，如果你没有 Github 可以在官网 https://github.com/ 注册。\n由于你的本地 Git 仓库和 GitHub 仓库之间的传输是通过 SSH 加密的，所以我们需要配置验证信息：\n使用以下命令生成 SSH Key：\n1 $ ssh-keygen -t rsa -C \"youremail@example.com\" 后面的 your_email@youremail.com 改为你在 Github 上注册的邮箱，之后会要求确认路径和输入密码，我们这使用默认的一路回车就行。\n成功的话会在 ~/ 下生成 .ssh 文件夹，进去，打开 id_rsa.pub，复制里面的 key。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 $ ssh-keygen -t rsa -C \"429240967@qq.com\" Generating public/private rsa key pair. Enter file in which to save the key (/Users/tianqixin/.ssh/id_rsa): Enter passphrase (empty for no passphrase): # 直接回车 Enter same passphrase again: # 直接回车 Your identification has been saved in /Users/tianqixin/.ssh/id_rsa. Your public key has been saved in /Users/tianqixin/.ssh/id_rsa.pub. The key fingerprint is: SHA256:MDKVidPTDXIQoJwoqUmI4LBAsg5XByBlrOEzkxrwARI 429240967@qq.com The key's randomart image is: +---[RSA 3072]----+ |E*+.+=**oo | |%Oo+oo=o. . | |%**.o.o. | |OO. o o | |+o+ S | |. | | | | | | | +----[SHA256]-----+ 回到 github 上，进入 Account =\u003e Settings（账户配置）。\n左边选择 SSH and GPG keys，然后点击 New SSH key 按钮。\n![SSH and GPG keys](./assets/SSH and GPG keys.png)\ntitle 设置标题，可以随便填，key 粘贴在你电脑上生成的 key（ 上面生成的~/.ssh/id_rsa.pub文件内容），最后点击Add SSH key按钮添加。\n添加成功后界面如下所示\n![SSH and GPG keys](./assets/SSH and GPG keys.png)\n为了验证是否成功，输入以下命令：\n1 2 3 4 5 6 $ ssh -T git@github.com The authenticity of host 'github.com (52.74.223.119)' can't be established. RSA key fingerprint is SHA256:nThbg6kXUpJWGl7E1IGOCspRomTxdCARLviKw6E5SY8. Are you sure you want to continue connecting (yes/no/[fingerprint])? yes # 输入 yes Warning: Permanently added 'github.com,52.74.223.119' (RSA) to the list of known hosts. Hi tianqixin! You've successfully authenticated, but GitHub does not provide shell access. # 成功信息 以上命令说明我们已成功连上 Github。\n之后点击 New repository 如下图所示：\n之后在在 Repository name 填入 myblog（远程仓库名） ，其他保持默认设置，点击Create repository按钮，就成功地创建了一个新的Git仓库：\n创建成功后，显示如下信息：\n以上信息告诉我们可以从这个仓库克隆出新的仓库，也可以把本地仓库的内容推送到 GitHub 仓库。\n现在，我们根据 GitHub 的提示，在本地的仓库下运行命令：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 $ mkdir myblog\t# 创建测试目录 $ cd myblog/ # 进入测试目录 $ echo \"# Git 测试\" \u003e\u003e README.md\t# 创建 README.md 文件并写入内容 $ ls # 查看目录下的文件 README $ git init # 初始化 $ git add README.md # 添加文件 $ git commit -m \"添加 README.md 文件\" # 提交并备注信息 [master (root-commit) 0205aab] 添加 README.md 文件 1 file changed, 1 insertion(+) create mode 100644 README.md # 提交到 Github $ git remote add origin git@github.com:Ryukarin/myblog.git $ git push -u origin master 以下命令请根据你在 Github 成功创建新仓库的地方复制，而不是根据我提供的命令，因为我们的 Github 用户名不一样，仓库名也不一样。\n接下来我们返回 Github 创建的仓库，就可以看到文件已上传到 Github上：\n查看当前的远程库 要查看当前配置有哪些远程仓库，可以用命令：\n1 git remote 实例\n1 2 3 4 5 $ git remote origin $ git remote -v origin\tgit@github.com:Ryukarin/myblog.git (fetch) origin\tgit@github.com:Ryukarin/myblog.git (push) 执行时加上 -v 参数，你还可以看到每个别名的实际链接地址。\n提取远程仓库 Git 有两个命令用来提取远程仓库的更新。\n从远程仓库下载新分支与数据： 1 git fetch 该命令执行完后需要执行 git merge 远程分支到你所在的分支。\n从远端仓库提取数据并尝试合并到当前分支： 1 git merge 该命令就是在执行 git fetch 之后紧接着执行 git merge 远程分支到你所在的任意分支。\n假设你配置好了一个远程仓库，并且你想要提取更新的数据，你可以首先执行 git fetch [alias] 告诉 Git 去获取它有你没有的数据，然后你可以执行 git merge [alias]/[branch] 以将服务器上的任何更新（假设有人这时候推送到服务器了）合并到你的当前分支。\n接下来我们在 Github 上点击 README.md 并在线修改它:\n修改好 README.md 之后，点击底部的 Commit changes 按钮。\n然后我们在本地更新修改。\n1 2 3 4 5 6 7 $ git fetch origin remote: Counting objects: 3, done. remote: Compressing objects: 100% (2/2), done. remote: Total 3 (delta 0), reused 0 (delta 0), pack-reused 0 Unpacking objects: 100% (3/3), done. From github.com:Ryukarin/myblog 0205aab..febd8ed master -\u003e origin/main 以上信息\"0205aab..febd8ed master -\u003e origin/master\" 说明 main 分支已被更新，我们可以使用以下命令将更新同步到本地：\n1 2 3 4 5 $ git merge origin/main Updating 0205aab..febd8ed Fast-forward README.md | 1 + 1 file changed, 1 insertion(+) 查看 README.md 文件内容：\n1 2 3 4 $ cat README.md # Git 测试 --- ## 第一次修改内容（二级标题） 推送到远程仓库 推送你的新分支与数据到某个远端仓库命令：\n1 git push [alias] [branch] 以上命令将你的 [branch] 分支推送成为 [alias] 远程仓库上的 [branch] 分支，实例如下。\n1 2 3 4 5 6 7 8 $ touch test.txt # 添加文件 $ git add test.txt $ git commit -m \"添加到远程\" master 69e702d] 添加到远程 1 file changed, 0 insertions(+), 0 deletions(-) create mode 100644 test.txt $ git push origin master # 推送到 Github 重新回到我们的 Github 仓库，可以看到文件已经提交上来了：\n删除远程仓库 删除远程仓库你可以使用命令：\n1 git remote rm [别名] 实例\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 $ git remote -v origin git@github.com:Ryukarin/myblog.git (fetch) origin git@github.com:Ryukarin/myblog.git (push) # 添加仓库 origin2 $ git remote add origin2 git@github.com:Ryukarin/myblog.git $ git remote -v origin git@github.com:Ryukarin/myblog.git (fetch) origin git@github.com:Ryukarin/myblog.git (push) origin2 git@github.com:Ryukarin/myblog.git (fetch) origin2 git@github.com:Ryukarin/myblog.git (push) # 删除仓库 origin2 $ git remote rm origin2 $ git remote -v origin git@github.com:Ryukarin/myblog.git (fetch) origin git@github.com:Ryukarin/myblog.git (push) ::: tip 码云（Gitee）\n大家都知道国内访问 Github 速度比较慢，很影响我们的使用。\n如果你希望体验到 Git 飞一般的速度，可以使用国内的 Git 托管服务——Gitee（gitee.com）。\nGitee 提供免费的 Git 仓库，还集成了代码质量检测、项目演示等功能。对于团队协作开发，Gitee 还提供了项目管理、代码托管、文档管理的服务，5 人以下小团队免费。\n使用方法和 Github 大同小异，具体就不展开说了。\n:::\nGit 服务器搭建 前面我们远程仓库使用了 Github，Github 公开的项目是免费的，2019 年开始 Github 私有存储库也可以无限制使用。\n这当然我们也可以自己搭建一台 Git 服务器作为私有仓库使用。\n接下来我们将以 Centos 为例搭建 Git 服务器。\n安装Git 1 2 $ yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel perl-devel $ yum install git 接下来我们 创建一个git用户组和用户，用来运行git服务：\n1 2 $ groupadd git $ useradd git -g git 创建证书登录 收集所有需要登录的用户的公钥，公钥位于id_rsa.pub文件中，把我们的公钥导入到/home/git/.ssh/authorized_keys文件里，一行一个。\n如果没有该文件创建它：\n1 2 3 4 5 $ cd /home/git/ $ mkdir .ssh $ chmod 755 .ssh $ touch .ssh/authorized_keys $ chmod 644 .ssh/authorized_keys 初始化Git仓库 首先我们选定一个目录作为 Git 仓库，假定是 /home/gitrepo/runoob.git，在 /home/gitrepo 目录下输入命令：\n1 2 3 4 5 6 7 $ cd /home $ mkdir gitrepo $ chown git:git gitrepo/ $ cd gitrepo $ git init --bare runoob.git Initialized empty Git repository in /home/gitrepo/runoob.git/ 以上命令 Git 创建一个空仓库，服务器上的Git仓库通常都以 .git 结尾。然后，把仓库所属用户改为git：\n1 $ chown -R git:git runoob.git 克隆仓库 1 2 3 4 $ git clone git@192.168.45.4:/home/gitrepo/runoob.git Cloning into 'runoob'... warning: You appear to have cloned an empty repository. Checking connectivity... done. 192.168.45.4 为 Git 所在服务器 ip ，你需要将其修改为你自己的 Git 服务 ip。\n这样我们的 Git 服务器安装就完成。\n",
  "wordCount" : "2952",
  "inLanguage": "zh",
  "datePublished": "2021-06-24T00:00:00Z",
  "dateModified": "2021-06-24T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Lucky"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:28536/posts/it/git/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Lucky's blog",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:28536/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:28536/" accesskey="h" title="Lucky&#39;s blog (Alt + H)">
                        
                    <img src="http://localhost:28536/icon_huf7f37d223c0e3c28213c0e23e44d661f_15070_0x35_resize_box_3.png" alt="" aria-label="logo"
                        height="35">Lucky&#39;s blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:28536/search/" title="搜索">
                    <span>搜索</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:28536/" title="主页">
                    <span>主页</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:28536/posts/" title="文章">
                    <span>文章</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:28536/archives/" title="时间轴">
                    <span>时间轴</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:28536/about/" title="关于">
                    <span>关于</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:28536/">主页</a>&nbsp;»&nbsp;<a href="http://localhost:28536/posts/">文章</a></div>
    <h1 class="post-title entry-hint-parent">
      Git笔记
      <span class="entry-hint" title="Draft">
        <svg xmlns="http://www.w3.org/2000/svg" height="35" viewBox="0 -960 960 960" fill="currentColor">
          <path
            d="M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z" />
        </svg>
      </span>
    </h1>
    <div class="post-meta"><span title='2021-06-24 00:00:00 +0000 UTC'>2021-06-24 00:00:00</span>&nbsp;·&nbsp;14 分钟&nbsp;·&nbsp;Lucky

</div>
  </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">目录</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#git-%e7%ac%94%e8%ae%b0" aria-label="Git 笔记">Git 笔记</a><ul>
                            
                    <li>
                        <a href="#git-%e6%98%af%e4%bb%80%e4%b9%88" aria-label="Git 是什么">Git 是什么</a></li></ul>
                    </li>
                    <li>
                        <a href="#git-%e5%ae%89%e8%a3%85%e9%85%8d%e7%bd%ae" aria-label="Git 安装配置">Git 安装配置</a><ul>
                            
                    <li>
                        <a href="#debianubuntu" aria-label="Debian/Ubuntu">Debian/Ubuntu</a></li>
                    <li>
                        <a href="#centosredhat" aria-label="Centos/RedHat">Centos/RedHat</a></li>
                    <li>
                        <a href="#%e6%ba%90%e7%a0%81%e5%ae%89%e8%a3%85" aria-label="源码安装">源码安装</a></li></ul>
                    </li>
                    <li>
                        <a href="#git-%e9%85%8d%e7%bd%ae" aria-label="Git 配置">Git 配置</a><ul>
                            
                    <li>
                        <a href="#%e7%94%a8%e6%88%b7%e4%bf%a1%e6%81%af" aria-label="用户信息">用户信息</a></li>
                    <li>
                        <a href="#%e6%96%87%e6%9c%ac%e7%bc%96%e8%be%91%e5%99%a8" aria-label="文本编辑器">文本编辑器</a></li>
                    <li>
                        <a href="#%e5%b7%ae%e5%bc%82%e5%88%86%e6%9e%90%e5%b7%a5%e5%85%b7" aria-label="差异分析工具">差异分析工具</a></li>
                    <li>
                        <a href="#%e6%9f%a5%e7%9c%8b%e9%85%8d%e7%bd%ae%e4%bf%a1%e6%81%af" aria-label="查看配置信息">查看配置信息</a></li></ul>
                    </li>
                    <li>
                        <a href="#git-%e5%b7%a5%e4%bd%9c%e6%b5%81%e7%a8%8b" aria-label="Git 工作流程">Git 工作流程</a></li>
                    <li>
                        <a href="#git-%e5%b7%a5%e4%bd%9c%e5%8c%ba%e6%9a%82%e5%ad%98%e5%8c%ba%e5%92%8c%e7%89%88%e6%9c%ac%e5%ba%93" aria-label="Git 工作区、暂存区和版本库">Git 工作区、暂存区和版本库</a><ul>
                            
                    <li>
                        <a href="#%e5%9f%ba%e6%9c%ac%e6%a6%82%e5%bf%b5" aria-label="基本概念">基本概念</a></li></ul>
                    </li>
                    <li>
                        <a href="#git-%e5%88%9b%e5%bb%ba%e4%bb%93%e5%ba%93" aria-label="Git 创建仓库">Git 创建仓库</a><ul>
                            
                    <li>
                        <a href="#git-init" aria-label="git init">git init</a></li>
                    <li>
                        <a href="#git-clone" aria-label="git clone">git clone</a></li>
                    <li>
                        <a href="#%e9%85%8d%e7%bd%ae" aria-label="配置">配置</a></li></ul>
                    </li>
                    <li>
                        <a href="#git-%e5%9f%ba%e6%9c%ac%e6%93%8d%e4%bd%9c" aria-label="Git 基本操作">Git 基本操作</a><ul>
                            
                    <li>
                        <a href="#%e5%88%9b%e5%bb%ba%e4%bb%93%e5%ba%93%e5%91%bd%e4%bb%a4" aria-label="创建仓库命令">创建仓库命令</a></li>
                    <li>
                        <a href="#%e6%8f%90%e4%ba%a4%e4%b8%8e%e4%bf%ae%e6%94%b9" aria-label="提交与修改">提交与修改</a></li>
                    <li>
                        <a href="#%e6%8f%90%e4%ba%a4%e6%97%a5%e5%bf%97" aria-label="提交日志">提交日志</a></li>
                    <li>
                        <a href="#%e8%bf%9c%e7%a8%8b%e6%93%8d%e4%bd%9c" aria-label="远程操作">远程操作</a></li></ul>
                    </li>
                    <li>
                        <a href="#git-%e5%88%86%e6%94%af%e7%ae%a1%e7%90%86" aria-label="Git 分支管理">Git 分支管理</a><ul>
                            
                    <li>
                        <a href="#%e5%88%97%e5%87%ba%e5%88%86%e6%94%af" aria-label="列出分支">列出分支</a></li>
                    <li>
                        <a href="#%e5%88%a0%e9%99%a4%e5%88%86%e6%94%af" aria-label="删除分支">删除分支</a></li>
                    <li>
                        <a href="#%e5%88%86%e6%94%af%e5%90%88%e5%b9%b6" aria-label="分支合并">分支合并</a></li>
                    <li>
                        <a href="#%e5%90%88%e5%b9%b6%e5%86%b2%e7%aa%81" aria-label="合并冲突">合并冲突</a></li></ul>
                    </li>
                    <li>
                        <a href="#git-%e6%9f%a5%e7%9c%8b%e6%8f%90%e4%ba%a4%e5%8e%86%e5%8f%b2" aria-label="Git 查看提交历史">Git 查看提交历史</a><ul>
                            
                    <li>
                        <a href="#git-log" aria-label="git log">git log</a></li>
                    <li>
                        <a href="#git-blame" aria-label="git blame">git blame</a></li></ul>
                    </li>
                    <li>
                        <a href="#git-%e6%a0%87%e7%ad%be" aria-label="Git 标签">Git 标签</a></li>
                    <li>
                        <a href="#git-%e8%bf%9c%e7%a8%8b%e4%bb%93%e5%ba%93github" aria-label="Git 远程仓库（GitHub）">Git 远程仓库（GitHub）</a><ul>
                            
                    <li>
                        <a href="#%e6%b7%bb%e5%8a%a0%e8%bf%9c%e7%a8%8b%e5%ba%93" aria-label="添加远程库">添加远程库</a></li>
                    <li>
                        <a href="#%e6%9f%a5%e7%9c%8b%e5%bd%93%e5%89%8d%e7%9a%84%e8%bf%9c%e7%a8%8b%e5%ba%93" aria-label="查看当前的远程库">查看当前的远程库</a></li>
                    <li>
                        <a href="#%e6%8f%90%e5%8f%96%e8%bf%9c%e7%a8%8b%e4%bb%93%e5%ba%93" aria-label="提取远程仓库">提取远程仓库</a></li>
                    <li>
                        <a href="#%e6%8e%a8%e9%80%81%e5%88%b0%e8%bf%9c%e7%a8%8b%e4%bb%93%e5%ba%93" aria-label="推送到远程仓库">推送到远程仓库</a></li>
                    <li>
                        <a href="#%e5%88%a0%e9%99%a4%e8%bf%9c%e7%a8%8b%e4%bb%93%e5%ba%93" aria-label="删除远程仓库">删除远程仓库</a></li></ul>
                    </li>
                    <li>
                        <a href="#git-%e6%9c%8d%e5%8a%a1%e5%99%a8%e6%90%ad%e5%bb%ba" aria-label="Git 服务器搭建">Git 服务器搭建</a><ul>
                            
                    <li>
                        <a href="#%e5%ae%89%e8%a3%85git" aria-label="安装Git">安装Git</a></li>
                    <li>
                        <a href="#%e5%88%9b%e5%bb%ba%e8%af%81%e4%b9%a6%e7%99%bb%e5%bd%95" aria-label="创建证书登录">创建证书登录</a></li>
                    <li>
                        <a href="#%e5%88%9d%e5%a7%8b%e5%8c%96git%e4%bb%93%e5%ba%93" aria-label="初始化Git仓库">初始化Git仓库</a></li>
                    <li>
                        <a href="#%e5%85%8b%e9%9a%86%e4%bb%93%e5%ba%93" aria-label="克隆仓库">克隆仓库</a>
                    </li>
                </ul>
                </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>

  <div class="post-content"><h2 id="git-笔记">Git 笔记<a hidden class="anchor" aria-hidden="true" href="#git-笔记">#</a></h2>
<h3 id="git-是什么">Git 是什么<a hidden class="anchor" aria-hidden="true" href="#git-是什么">#</a></h3>
<p>Git 是一个开源的分布式版本控制系统，用于敏捷高效地处理任何或小或大的项目。</p>
<p>Git 是 Linus Torvalds 为了帮助管理 Linux 内核开发而开发的一个开放源码的版本控制软件。</p>
<p>Git 与常用的版本控制工具 CVS，Subversion 等不同，它采用了分布式版本库的方式，不必服务器端软件支持。</p>
<p>Git 不仅仅是个版本控制系统，它也是个内容管理系统（CMS），工作管理系统等。</p>
<p><img alt="dvcs" loading="lazy" src="./assets/dvcs.png"></p>
<h2 id="git-安装配置">Git 安装配置<a hidden class="anchor" aria-hidden="true" href="#git-安装配置">#</a></h2>
<p>在使用 Git 前我们需要先安装 Git。Git 目前支持 Linux/Unix、Solaris、Mac 和 Windows 平台上运行。</p>
<p>Git 各平台安装包下载地址为：http://git-scm.com/downloads</p>
<p>::: tip 说明</p>
<p>本笔记主要以 Linux 平台为主</p>
<p>Git 的工作需要调用 curl，zlib，openssl，expat，libiconv 等库的代码，所以需要先安装这些依赖工具。</p>
<p>:::</p>
<p>各 Linux 系统可以使用其安装包管理工具（apt-get、yum 等）进行安装：</p>
<h3 id="debianubuntu">Debian/Ubuntu<a hidden class="anchor" aria-hidden="true" href="#debianubuntu">#</a></h3>
<p>如果你使用的系统是 Debian/Ubuntu， Git 安装命令为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ apt-get install libcurl4-gnutls-dev libexpat1-dev gettext libz-dev libssl-dev
</span></span><span class="line"><span class="cl">$ apt-get install git
</span></span><span class="line"><span class="cl">$ git --version
</span></span><span class="line"><span class="cl">git version 1.8.1.2
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="centosredhat">Centos/RedHat<a hidden class="anchor" aria-hidden="true" href="#centosredhat">#</a></h3>
<p>如果你使用的系统是 Centos/RedHat， Git 安装命令为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel
</span></span><span class="line"><span class="cl">$ yum -y install git-core
</span></span><span class="line"><span class="cl">$ git --version
</span></span><span class="line"><span class="cl">git version 1.7.1
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="源码安装">源码安装<a hidden class="anchor" aria-hidden="true" href="#源码安装">#</a></h3>
<p>我们也可以在官网下载源码包来安装，最新源码包下载地址：<a href="https://git-scm.com/download">https://git-scm.com/download</a></p>
<p>安装指定系统的依赖包：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1">########## Centos/RedHat ##########</span>
</span></span><span class="line"><span class="cl">$ yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">########## Debian/Ubuntu ##########</span>
</span></span><span class="line"><span class="cl">$ apt-get install libcurl4-gnutls-dev libexpat1-dev gettext libz-dev libssl-dev
</span></span></code></pre></td></tr></table>
</div>
</div><p>解压安装下载的源码包：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ wget https://www.kernel.org/pub/software/scm/git/git-2.32.0.tar.gz
</span></span><span class="line"><span class="cl">$ tar -zxf git-2.32.0.tar.gz
</span></span><span class="line"><span class="cl">$ <span class="nb">cd</span> git-2.32.0
</span></span><span class="line"><span class="cl">$ make <span class="nv">prefix</span><span class="o">=</span>/usr/local all
</span></span><span class="line"><span class="cl">$ sudo make <span class="nv">prefix</span><span class="o">=</span>/usr/local install
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="git-配置">Git 配置<a hidden class="anchor" aria-hidden="true" href="#git-配置">#</a></h2>
<p>Git 提供了一个叫做 <code>git config</code> 的工具，专门用来配置或读取相应的工作环境变量。</p>
<p>这些环境变量，决定了 Git 在各个环节的具体工作方式和行为。这些变量可以存放在以下三个不同的地方：</p>
<ul>
<li><code>/etc/gitconfig</code> 文件：系统中对所有用户都普遍适用的配置。若使用 <code>git config</code> 时用 &ndash;system 选项，读写的就是这个文件。</li>
<li><code>~/.gitconfig</code> 文件：用户目录下的配置文件只适用于该用户。若使用 <code>git config</code> 时用 &ndash;global 选项，读写的就是这个文件。</li>
<li>当前项目的 Git 目录中的配置文件（也就是工作目录中的 <code>.git/config</code> 文件）：这里的配置仅仅针对当前项目有效。每一个级别的配置都会覆盖上层的相同配置，所以 <code>.git/config</code> 里的配置会覆盖 <code>/etc/gitconfig</code> 中的同名变量。</li>
</ul>
<p>此外，Git 还会尝试找寻 <code>/etc/gitconfig</code> 文件，只不过看当初 Git 装在什么目录，就以此作为根目录来定位。</p>
<h3 id="用户信息">用户信息<a hidden class="anchor" aria-hidden="true" href="#用户信息">#</a></h3>
<p>配置个人的用户名称和电子邮件地址：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git config --global user.name <span class="s2">&#34;runoob&#34;</span>
</span></span><span class="line"><span class="cl">$ git config --global user.email test@runoob.com
</span></span></code></pre></td></tr></table>
</div>
</div><p>如果用了 <strong>&ndash;global</strong> 选项，那么更改的配置文件就是位于你用户主目录下的那个，以后你所有的项目都会默认使用这里配置的用户信息。</p>
<p>如果要在某个特定的项目中使用其他名字或者电邮，只要去掉 &ndash;global 选项重新配置即可，新的设定保存在当前项目的 <code>.git/config</code> 文件里。</p>
<h3 id="文本编辑器">文本编辑器<a hidden class="anchor" aria-hidden="true" href="#文本编辑器">#</a></h3>
<p>设置Git默认使用的文本编辑器，一般可能会是 Vi 或者 Vim。如果你有其他偏好，比如 Emacs 的话，可以重新设置：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git config --global core.editor emacs
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="差异分析工具">差异分析工具<a hidden class="anchor" aria-hidden="true" href="#差异分析工具">#</a></h3>
<p>还有一个比较常用的是，在解决合并冲突时使用哪种差异分析工具。比如要改用 vimdiff 的话：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git config --global merge.tool vimdiff
</span></span></code></pre></td></tr></table>
</div>
</div><p>Git 可以理解 kdiff3，tkdiff，meld，xxdiff，emerge，vimdiff，gvimdiff，ecmerge，和 opendiff 等合并工具的输出信息。</p>
<p>当然，你也可以指定使用自己开发的工具。</p>
<h3 id="查看配置信息">查看配置信息<a hidden class="anchor" aria-hidden="true" href="#查看配置信息">#</a></h3>
<p>要检查已有的配置信息，可以使用 <code>git config --list</code> 命令：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git config --list
</span></span><span class="line"><span class="cl">http.postbuffer<span class="o">=</span>2M
</span></span><span class="line"><span class="cl">user.name<span class="o">=</span>runoob
</span></span><span class="line"><span class="cl">user.email<span class="o">=</span>test@runoob.com
</span></span></code></pre></td></tr></table>
</div>
</div><p>有时候会看到重复的变量名，那就说明它们来自不同的配置文件（比如 <code>/etc/gitconfig</code> 和 <code>~/.gitconfig</code>），不过最终 Git 实际采用的是最后一个。</p>
<p>这些配置我们也可以在 <code>~/.gitconfig</code> 或 <code>/etc/gitconfig</code> 看到，如下所示：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">vim ~/.gitconfig 
</span></span></code></pre></td></tr></table>
</div>
</div><p>显示内容如下所示：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>http<span class="o">]</span>
</span></span><span class="line"><span class="cl">    <span class="nv">postBuffer</span> <span class="o">=</span> 2M
</span></span><span class="line"><span class="cl"><span class="o">[</span>user<span class="o">]</span>
</span></span><span class="line"><span class="cl">    <span class="nv">name</span> <span class="o">=</span> runoob
</span></span><span class="line"><span class="cl">    <span class="nv">email</span> <span class="o">=</span> test@runoob.com
</span></span></code></pre></td></tr></table>
</div>
</div><p>也可以直接查阅某个环境变量的设定，只要把特定的名字跟在后面即可，像这样：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git config user.name
</span></span><span class="line"><span class="cl">runoob
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="git-工作流程">Git 工作流程<a hidden class="anchor" aria-hidden="true" href="#git-工作流程">#</a></h2>
<p>一般工作流程如下：</p>
<ul>
<li>克隆 Git 资源作为工作目录。</li>
<li>在克隆的资源上添加或修改文件。</li>
<li>如果其他人修改了，你可以更新资源。</li>
<li>在提交前查看修改。</li>
<li>提交修改。</li>
<li>在修改完成后，如果发现错误，可以撤回提交并再次修改并提交。</li>
</ul>
<p>下图展示了 Git 的工作流程：</p>
<p><img alt="git-process" loading="lazy" src="./assets/git-process.png"></p>
<h2 id="git-工作区暂存区和版本库">Git 工作区、暂存区和版本库<a hidden class="anchor" aria-hidden="true" href="#git-工作区暂存区和版本库">#</a></h2>
<h3 id="基本概念">基本概念<a hidden class="anchor" aria-hidden="true" href="#基本概念">#</a></h3>
<p>我们先来理解下 Git 工作区、暂存区和版本库概念：</p>
<ul>
<li>
<p>工作区：就是你在电脑里能看到的目录。</p>
</li>
<li>
<p>暂存区：英文叫 stage 或 index。一般存放在<code> .git</code> 目录下的 index 文件（<code>.git/index</code>）中，所以我们把暂存区有时也叫作索引（index）。</p>
</li>
<li>
<p>版本库：工作区有一个隐藏目录 <code>.git</code>，这个不算工作区，而是 Git 的版本库。</p>
</li>
</ul>
<p>下面这个图展示了工作区、版本库中的暂存区和版本库之间的关系：</p>
<p><img alt="git_wsb" loading="lazy" src="./assets/git_wsb.jpg"></p>
<ul>
<li>图中左侧为工作区，右侧为版本库。在版本库中标记为 &ldquo;index&rdquo; 的区域是暂存区（stage/index），标记为 &ldquo;master&rdquo; 的是 master 分支所代表的目录树。</li>
<li>图中我们可以看出此时 &ldquo;HEAD&rdquo; 实际是指向 master 分支的一个&quot;游标&quot;。所以图示的命令中出现 HEAD 的地方可以用 master 来替换。</li>
<li>图中的 objects 标识的区域为 Git 的对象库，实际位于 &ldquo;.git/objects&rdquo; 目录下，里面包含了创建的各种对象及内容。</li>
<li>当对工作区修改（或新增）的文件执行 <code>git add</code> 命令时，暂存区的目录树被更新，同时工作区修改（或新增）的文件内容被写入到对象库中的一个新的对象中，而该对象的 ID 被记录在暂存区的文件索引中。</li>
<li>当执行提交操作（git commit）时，暂存区的目录树写到版本库（对象库）中，master 分支会做相应的更新。即 master 指向的目录树就是提交时暂存区的目录树。</li>
<li>当执行 <code>git reset HEAD</code> 命令时，暂存区的目录树会被重写，被 master 分支指向的目录树所替换，但是工作区不受影响。</li>
<li>当执行 <code>git rm --cached &lt;file&gt;</code> 命令时，会直接从暂存区删除文件，工作区则不做出改变。</li>
<li>当执行 <code>git checkout .</code> 或者 <code>git checkout -- &lt;file&gt;</code> 命令时，会用暂存区全部或指定的文件替换工作区的文件。这个操作很危险，会清除工作区中未添加到暂存区的改动。</li>
<li>当执行 <code>git checkout HEAD .</code> 或者 <code>git checkout HEAD &lt;file&gt;</code> 命令时，会用 HEAD 指向的 master 分支中的全部或者部分文件替换暂存区和以及工作区中的文件。这个命令也是极具危险性的，因为不但会清除工作区中未提交的改动，也会清除暂存区中未提交的改动。</li>
</ul>
<h2 id="git-创建仓库">Git 创建仓库<a hidden class="anchor" aria-hidden="true" href="#git-创建仓库">#</a></h2>
<p>本章节我们将为大家介绍如何创建一个 Git 仓库。</p>
<p>你可以使用一个已经存在的目录作为Git仓库。</p>
<h3 id="git-init">git init<a hidden class="anchor" aria-hidden="true" href="#git-init">#</a></h3>
<p>Git 使用 <code>git init</code> 命令来初始化一个 Git 仓库，Git 的很多命令都需要在 Git 的仓库中运行，所以 <code>git init</code> 是使用 Git 的第一个命令。</p>
<p>在执行完成 <code>git init</code> 命令后，Git 仓库会生成一个 <code>.git</code> 目录，该目录包含了资源的所有元数据，其他的项目目录保持不变。</p>
<ul>
<li>使用方法</li>
</ul>
<p>使用当前目录作为Git仓库，我们只需使它初始化。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">git init
</span></span></code></pre></td></tr></table>
</div>
</div><p>该命令执行完后会在当前目录生成一个 .git 目录。</p>
<p>使用我们指定目录作为Git仓库。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">git init newrepo
</span></span></code></pre></td></tr></table>
</div>
</div><p>初始化后，会在 newrepo 目录下会出现一个名为 .git 的目录，所有 Git 需要的数据和资源都存放在这个目录中。</p>
<p>如果当前目录下有几个文件想要纳入版本控制，需要先用 <code>git add</code> 命令告诉 Git 开始对这些文件进行跟踪，然后提交：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git add *.c
</span></span><span class="line"><span class="cl">$ git add README
</span></span><span class="line"><span class="cl">$ git commit -m <span class="s1">&#39;初始化项目版本&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>以上命令将目录下以 .c 结尾及 README 文件提交到仓库中。</p>
<p>::: tip 注</p>
<p>在 Linux 系统中，commit 信息使用单引号 <strong>&rsquo;</strong>，Windows 系统，commit 信息使用双引号 <strong>&quot;</strong>。</p>
<p>所以在 git bash 中 <code>git commit -m '提交说明'</code> 这样是可以的，在 Windows 命令行中就要使用双引号 <code>git commit -m &quot;提交说明&quot;</code>。</p>
<p>:::</p>
<h3 id="git-clone">git clone<a hidden class="anchor" aria-hidden="true" href="#git-clone">#</a></h3>
<p>我们使用 <code>git clone</code> 从现有 Git 仓库中拷贝项目。</p>
<p>克隆仓库的命令格式为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">git clone &lt;repo&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>如果我们需要克隆到指定的目录，可以使用以下命令格式：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">git clone &lt;repo&gt; &lt;directory&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>参数说明：</strong></p>
<ul>
<li>**repo：**Git 仓库。</li>
<li>**directory：**本地目录。</li>
</ul>
<p>比如，要克隆 Ruby 语言的 Git 代码仓库 Grit，可以用下面的命令：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ git clone git://github.com/schacon/grit.git
</span></span></code></pre></td></tr></table>
</div>
</div><p>执行该命令后，会在当前目录下创建一个名为 <code>grit</code> 的目录，其中包含一个 <code> .git</code> 的目录，用于保存下载下来的所有版本记录。</p>
<p>如果要自己定义要新建的项目目录名称，可以在上面的命令末尾指定新的名字：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git clone git://github.com/schacon/grit.git mygrit
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="配置">配置<a hidden class="anchor" aria-hidden="true" href="#配置">#</a></h3>
<p>git 的设置使用 <code>git config</code> 命令。</p>
<p>显示当前的 git 配置信息：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git config --list
</span></span><span class="line"><span class="cl">credential.helper<span class="o">=</span>osxkeychain
</span></span><span class="line"><span class="cl">core.repositoryformatversion<span class="o">=</span><span class="m">0</span>
</span></span><span class="line"><span class="cl">core.filemode<span class="o">=</span><span class="nb">true</span>
</span></span><span class="line"><span class="cl">core.bare<span class="o">=</span><span class="nb">false</span>
</span></span><span class="line"><span class="cl">core.logallrefupdates<span class="o">=</span><span class="nb">true</span>
</span></span><span class="line"><span class="cl">core.ignorecase<span class="o">=</span><span class="nb">true</span>
</span></span><span class="line"><span class="cl">core.precomposeunicode<span class="o">=</span><span class="nb">true</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>编辑 git 配置文件:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git config -e
</span></span><span class="line"><span class="cl"><span class="c1"># 针对当前仓库 </span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>或者：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git config -e --global
</span></span><span class="line"><span class="cl"><span class="c1"># 针对系统上所有仓库</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>设置提交代码时的用户信息：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git config --global user.name <span class="s2">&#34;runoob&#34;</span>
</span></span><span class="line"><span class="cl">$ git config --global user.email test@runoob.com
</span></span></code></pre></td></tr></table>
</div>
</div><p>如果去掉 <strong>&ndash;global</strong> 参数只对当前仓库有效。</p>
<h2 id="git-基本操作">Git 基本操作<a hidden class="anchor" aria-hidden="true" href="#git-基本操作">#</a></h2>
<p>Git 的工作就是创建和保存你项目的快照及与之后的快照进行对比。</p>
<p>本节将对有关创建与提交你的项目快照的命令作介绍。</p>
<p>Git 常用的是以下 6 个命令：<strong>git clone</strong>、<strong>git push</strong>、<strong>git add</strong> 、<strong>git commit</strong>、<strong>git checkout</strong>、<strong>git pull</strong>，后面我们会详细介绍。</p>
<p><img alt="git_command" loading="lazy" src="./assets/git-command.jpg"></p>
<p>::: tip 说明</p>
<ul>
<li>workspace：工作区</li>
<li>staging area：暂存区/缓存区</li>
<li>local repository：版本库或本地仓库</li>
<li>remote repository：远程仓库</li>
</ul>
<p>:::</p>
<p>一个简单的操作步骤：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git init
</span></span><span class="line"><span class="cl">$ git add .
</span></span><span class="line"><span class="cl">$ git commit
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>git init</code> ：初始化仓库。</li>
<li><code>git add .</code> ：添加文件到暂存区。</li>
<li><code>git commit</code> ：将暂存区内容添加到仓库中。</li>
</ul>
<h3 id="创建仓库命令">创建仓库命令<a hidden class="anchor" aria-hidden="true" href="#创建仓库命令">#</a></h3>
<p>下表列出了 git 创建仓库的命令：</p>
<table>
<thead>
<tr>
<th style="text-align:left">命令</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>git init</code></td>
<td style="text-align:left">初始化仓库</td>
</tr>
<tr>
<td style="text-align:left"><code>git clone</code></td>
<td style="text-align:left">拷贝一份远程仓库，也就是下载一个项目。</td>
</tr>
</tbody>
</table>
<h3 id="提交与修改">提交与修改<a hidden class="anchor" aria-hidden="true" href="#提交与修改">#</a></h3>
<p>Git 的工作就是创建和保存你的项目的快照及与之后的快照进行对比。</p>
<p>下表列出了有关创建与提交你的项目的快照的命令：</p>
<table>
<thead>
<tr>
<th style="text-align:left">命令</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>git add</code></td>
<td style="text-align:left">添加文件到仓库</td>
</tr>
<tr>
<td style="text-align:left"><code>git status</code></td>
<td style="text-align:left">查看仓库当前的状态，显示有变更的文件。</td>
</tr>
<tr>
<td style="text-align:left"><code>git diff</code></td>
<td style="text-align:left">比较文件的不同，即暂存区和工作区的差异。</td>
</tr>
<tr>
<td style="text-align:left"><code>git commit</code></td>
<td style="text-align:left">提交暂存区到本地仓库。</td>
</tr>
<tr>
<td style="text-align:left"><code>git reset</code></td>
<td style="text-align:left">回退版本。</td>
</tr>
<tr>
<td style="text-align:left"><code>git rm</code></td>
<td style="text-align:left">删除工作区文件。</td>
</tr>
<tr>
<td style="text-align:left"><code>git mv</code></td>
<td style="text-align:left">移动或重命名工作区文件。</td>
</tr>
</tbody>
</table>
<h3 id="提交日志">提交日志<a hidden class="anchor" aria-hidden="true" href="#提交日志">#</a></h3>
<table>
<thead>
<tr>
<th style="text-align:left">命令</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>git log</code></td>
<td style="text-align:left">查看历史提交记录</td>
</tr>
<tr>
<td style="text-align:left"><code>git blame &lt;file&gt;</code></td>
<td style="text-align:left">以列表形式查看指定文件的历史修改记录</td>
</tr>
</tbody>
</table>
<h3 id="远程操作">远程操作<a hidden class="anchor" aria-hidden="true" href="#远程操作">#</a></h3>
<table>
<thead>
<tr>
<th style="text-align:left">命令</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>git remote</code></td>
<td style="text-align:left">远程仓库操作</td>
</tr>
<tr>
<td style="text-align:left"><code>git fetch</code></td>
<td style="text-align:left">从远程获取代码库</td>
</tr>
<tr>
<td style="text-align:left"><code>git pull</code></td>
<td style="text-align:left">下载远程代码并合并</td>
</tr>
<tr>
<td style="text-align:left"><code>git push</code></td>
<td style="text-align:left">上传远程代码并合并</td>
</tr>
</tbody>
</table>
<h2 id="git-分支管理">Git 分支管理<a hidden class="anchor" aria-hidden="true" href="#git-分支管理">#</a></h2>
<p>几乎每一种版本控制系统都以某种形式支持分支。使用分支意味着你可以从开发主线上分离开来，然后在不影响主线的同时继续工作。</p>
<p>有人把 Git 的分支模型称为<strong>必杀技特性</strong>，而正是因为它，将 <strong>Git</strong> 从版本控制系统家族里区分出来。</p>
<p>创建分支命令：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">git branch <span class="o">(</span>branchname<span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>切换分支命令:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">git checkout <span class="o">(</span>branchname<span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>当你切换分支的时候，Git 会用该分支的最后提交的快照替换你的工作目录的内容， 所以多个分支不需要多个目录。</p>
<p>合并分支命令:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">git merge 
</span></span></code></pre></td></tr></table>
</div>
</div><p>你可以多次合并到统一分支， 也可以选择在合并之后直接删除被并入的分支。</p>
<p>开始前我们先创建一个测试目录：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ mkdir gitdemo
</span></span><span class="line"><span class="cl">$ <span class="nb">cd</span> gitdemo/
</span></span><span class="line"><span class="cl">$ git init
</span></span><span class="line"><span class="cl">Initialized empty Git repository...
</span></span><span class="line"><span class="cl">$ touch README
</span></span><span class="line"><span class="cl">$ git add README
</span></span><span class="line"><span class="cl">$ git commit -m <span class="s1">&#39;第一次版本提交&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>master <span class="o">(</span>root-commit<span class="o">)</span> 3b58100<span class="o">]</span> 第一次版本提交
</span></span><span class="line"><span class="cl"> <span class="m">1</span> file changed, <span class="m">0</span> insertions<span class="o">(</span>+<span class="o">)</span>, <span class="m">0</span> deletions<span class="o">(</span>-<span class="o">)</span>
</span></span><span class="line"><span class="cl"> create mode <span class="m">100644</span> README
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="列出分支">列出分支<a hidden class="anchor" aria-hidden="true" href="#列出分支">#</a></h3>
<p>列出分支基本命令：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">git branch
</span></span></code></pre></td></tr></table>
</div>
</div><p>没有参数时，<code>git branch</code> 会列出你在本地的分支。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git branch
</span></span><span class="line"><span class="cl">* master
</span></span></code></pre></td></tr></table>
</div>
</div><p>此例的意思就是，我们有一个叫做 <strong>master</strong> 的分支，并且该分支是当前分支。</p>
<p>当你执行 <code>git init</code> 的时候，默认情况下 Git 就会为你创建 <strong>master</strong> 分支。</p>
<p>如果我们要手动创建一个分支。执行 <code>git branch (branchname)</code> 即可。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git branch testing
</span></span><span class="line"><span class="cl">$ git branch
</span></span><span class="line"><span class="cl">* master
</span></span><span class="line"><span class="cl">  testing
</span></span></code></pre></td></tr></table>
</div>
</div><p>现在我们可以看到，有了一个新分支 <strong>testing</strong>。</p>
<p>当你以此方式在上次提交更新之后创建了新分支，如果后来又有更新提交， 然后又切换到了 <strong>testing</strong> 分支，Git 将还原你的工作目录到你创建分支时候的样子。</p>
<p>接下来我们将演示如何切换分支，我们用 <code>git checkout (branch)</code> 切换到我们要修改的分支。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ ls
</span></span><span class="line"><span class="cl">README
</span></span><span class="line"><span class="cl">$ <span class="nb">echo</span> <span class="s1">&#39;runoob.com&#39;</span> &gt; test.txt
</span></span><span class="line"><span class="cl">$ git add .
</span></span><span class="line"><span class="cl">$ git commit -m <span class="s1">&#39;add test.txt&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>master 3e92c19<span class="o">]</span> add test.txt
</span></span><span class="line"><span class="cl"> <span class="m">1</span> file changed, <span class="m">1</span> insertion<span class="o">(</span>+<span class="o">)</span>
</span></span><span class="line"><span class="cl"> create mode <span class="m">100644</span> test.txt
</span></span><span class="line"><span class="cl">$ ls
</span></span><span class="line"><span class="cl">README        test.txt
</span></span><span class="line"><span class="cl">$ git checkout testing
</span></span><span class="line"><span class="cl">Switched to branch <span class="s1">&#39;testing&#39;</span>
</span></span><span class="line"><span class="cl">$ ls
</span></span><span class="line"><span class="cl">README
</span></span></code></pre></td></tr></table>
</div>
</div><p>当我们切换到 <strong>testing</strong> 分支的时候，我们添加的新文件 test.txt 被移除了。切换回 <strong>master</strong> 分支的时候，它们有重新出现了。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git checkout master
</span></span><span class="line"><span class="cl">Switched to branch <span class="s1">&#39;master&#39;</span>
</span></span><span class="line"><span class="cl">$ ls
</span></span><span class="line"><span class="cl">README        test.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>我们也可以使用 <code>git checkout -b (branchname)</code> 命令来创建新分支并立即切换到该分支下，从而在该分支中操作。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git checkout -b newtest
</span></span><span class="line"><span class="cl">Switched to a new branch <span class="s1">&#39;newtest&#39;</span>
</span></span><span class="line"><span class="cl">$ git rm test.txt 
</span></span><span class="line"><span class="cl">rm <span class="s1">&#39;test.txt&#39;</span>
</span></span><span class="line"><span class="cl">$ ls
</span></span><span class="line"><span class="cl">README
</span></span><span class="line"><span class="cl">$ touch runoob.php
</span></span><span class="line"><span class="cl">$ git add .
</span></span><span class="line"><span class="cl">$ git commit -am <span class="s1">&#39;removed test.txt、add runoob.php&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>newtest c1501a2<span class="o">]</span> removed test.txt、add runoob.php
</span></span><span class="line"><span class="cl"> <span class="m">2</span> files changed, <span class="m">1</span> deletion<span class="o">(</span>-<span class="o">)</span>
</span></span><span class="line"><span class="cl"> create mode <span class="m">100644</span> runoob.php
</span></span><span class="line"><span class="cl"> delete mode <span class="m">100644</span> test.txt
</span></span><span class="line"><span class="cl">$ ls
</span></span><span class="line"><span class="cl">README        runoob.php
</span></span><span class="line"><span class="cl">$ git checkout master
</span></span><span class="line"><span class="cl">Switched to branch <span class="s1">&#39;master&#39;</span>
</span></span><span class="line"><span class="cl">$ ls
</span></span><span class="line"><span class="cl">README        test.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>如你所见，我们创建了一个分支，在该分支的上移除了一些文件 test.txt，并添加了 runoob.php 文件，然后切换回我们的主分支，删除的 test.txt 文件又回来了，且新增加的 runoob.php 不存在主分支中。</p>
<p>使用分支将工作切分开来，从而让我们能够在不同开发环境中做事，并来回切换。</p>
<h3 id="删除分支">删除分支<a hidden class="anchor" aria-hidden="true" href="#删除分支">#</a></h3>
<p>删除分支命令：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">git branch -d <span class="o">(</span>branchname<span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>例如我们要删除 testing 分支：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git branch
</span></span><span class="line"><span class="cl">* master
</span></span><span class="line"><span class="cl">  testing
</span></span><span class="line"><span class="cl">$ git branch -d testing
</span></span><span class="line"><span class="cl">Deleted branch testing <span class="o">(</span>was 85fc7e7<span class="o">)</span>.
</span></span><span class="line"><span class="cl">$ git branch
</span></span><span class="line"><span class="cl">* master
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="分支合并">分支合并<a hidden class="anchor" aria-hidden="true" href="#分支合并">#</a></h3>
<p>一旦某分支有了独立内容，你终究会希望将它合并回到你的主分支。 你可以使用以下命令将任何分支合并到当前分支中去：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">git merge
</span></span><span class="line"><span class="cl">$ git branch
</span></span><span class="line"><span class="cl">* master
</span></span><span class="line"><span class="cl">  newtest
</span></span><span class="line"><span class="cl">$ ls
</span></span><span class="line"><span class="cl">README        test.txt
</span></span><span class="line"><span class="cl">$ git merge newtest
</span></span><span class="line"><span class="cl">Updating 3e92c19..c1501a2
</span></span><span class="line"><span class="cl">Fast-forward
</span></span><span class="line"><span class="cl"> runoob.php <span class="p">|</span> <span class="m">0</span>
</span></span><span class="line"><span class="cl"> test.txt   <span class="p">|</span> <span class="m">1</span> -
</span></span><span class="line"><span class="cl"> <span class="m">2</span> files changed, <span class="m">1</span> deletion<span class="o">(</span>-<span class="o">)</span>
</span></span><span class="line"><span class="cl"> create mode <span class="m">100644</span> runoob.php
</span></span><span class="line"><span class="cl"> delete mode <span class="m">100644</span> test.txt
</span></span><span class="line"><span class="cl">$ ls
</span></span><span class="line"><span class="cl">README        runoob.php
</span></span></code></pre></td></tr></table>
</div>
</div><p>以上实例中我们将 newtest 分支合并到主分支去，test.txt 文件被删除。</p>
<p>合并完后就可以删除分支:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git branch -d newtest
</span></span><span class="line"><span class="cl">Deleted branch newtest <span class="o">(</span>was c1501a2<span class="o">)</span>.
</span></span></code></pre></td></tr></table>
</div>
</div><p>删除后， 就只剩下 master 分支了：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git branch
</span></span><span class="line"><span class="cl">* master
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="合并冲突">合并冲突<a hidden class="anchor" aria-hidden="true" href="#合并冲突">#</a></h3>
<p>合并并不仅仅是简单的文件添加、移除的操作，Git 也会合并修改。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git branch
</span></span><span class="line"><span class="cl">* master
</span></span><span class="line"><span class="cl">$ cat runoob.php
</span></span></code></pre></td></tr></table>
</div>
</div><p>首先，我们创建一个叫做 change_site 的分支，切换过去，我们将 runoob.php 内容改为:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">&lt;?php
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;runoob&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">?&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>创建 change_site 分支：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git checkout -b change_site
</span></span><span class="line"><span class="cl">Switched to a new branch <span class="s1">&#39;change_site&#39;</span>
</span></span><span class="line"><span class="cl">$ vim runoob.php
</span></span><span class="line"><span class="cl">$ head -3 runoob.php
</span></span><span class="line"><span class="cl">&lt;?php
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;runoob&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">?&gt;
</span></span><span class="line"><span class="cl">$ git commit -am <span class="s1">&#39;changed the runoob.php&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>change_site 7774248<span class="o">]</span> changed the runoob.php
</span></span><span class="line"><span class="cl"> <span class="m">1</span> file changed, <span class="m">3</span> insertions<span class="o">(</span>+<span class="o">)</span>
</span></span><span class="line"><span class="cl"> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>将修改的内容提交到 change_site 分支中。 现在，假如切换回 master 分支我们可以看内容恢复到我们修改前的(空文件，没有代码)，我们再次修改 runoob.php 文件。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git checkout master
</span></span><span class="line"><span class="cl">Switched to branch <span class="s1">&#39;master&#39;</span>
</span></span><span class="line"><span class="cl">$ cat runoob.php
</span></span><span class="line"><span class="cl">$ vim runoob.php    <span class="c1"># 修改内容如下</span>
</span></span><span class="line"><span class="cl">$ cat runoob.php
</span></span><span class="line"><span class="cl">&lt;?php
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> 1<span class="p">;</span>
</span></span><span class="line"><span class="cl">?&gt;
</span></span><span class="line"><span class="cl">$ git diff
</span></span><span class="line"><span class="cl">diff --git a/runoob.php b/runoob.php
</span></span><span class="line"><span class="cl">index e69de29..ac60739 <span class="m">100644</span>
</span></span><span class="line"><span class="cl">--- a/runoob.php
</span></span><span class="line"><span class="cl">+++ b/runoob.php
</span></span><span class="line"><span class="cl">@@ -0,0 +1,3 @@
</span></span><span class="line"><span class="cl">+&lt;?php
</span></span><span class="line"><span class="cl">+echo 1<span class="p">;</span>
</span></span><span class="line"><span class="cl">+?&gt;
</span></span><span class="line"><span class="cl">$ git commit -am <span class="s1">&#39;修改代码&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>master c68142b<span class="o">]</span> 修改代码
</span></span><span class="line"><span class="cl"> <span class="m">1</span> file changed, <span class="m">3</span> insertions<span class="o">(</span>+<span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>现在这些改变已经记录到我的 &ldquo;master&rdquo; 分支了。接下来我们将 &ldquo;change_site&rdquo; 分支合并过来。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git merge change_site
</span></span><span class="line"><span class="cl">Auto-merging runoob.php
</span></span><span class="line"><span class="cl">CONFLICT <span class="o">(</span>content<span class="o">)</span>: Merge conflict in runoob.php
</span></span><span class="line"><span class="cl">Automatic merge failed<span class="p">;</span> fix conflicts and <span class="k">then</span> commit the result.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ cat runoob.php     <span class="c1"># 代开文件，看到冲突内容</span>
</span></span><span class="line"><span class="cl">&lt;?php
</span></span><span class="line"><span class="cl"><span class="o">&lt;&lt;&lt;&lt;&lt;&lt;</span>&lt; HEAD
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> 1<span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="o">=======</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;runoob&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">&gt;&gt;&gt;&gt;&gt;&gt;&gt; change_site
</span></span><span class="line"><span class="cl">?&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>我们将前一个分支合并到 master 分支，一个合并冲突就出现了，接下来我们需要手动去修改它。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ vim runoob.php 
</span></span><span class="line"><span class="cl">$ cat runoob.php
</span></span><span class="line"><span class="cl">&lt;?php
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> 1<span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;runoob&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">?&gt;
</span></span><span class="line"><span class="cl">$ git diff
</span></span><span class="line"><span class="cl">diff --cc runoob.php
</span></span><span class="line"><span class="cl">index ac60739,b63d7d7..0000000
</span></span><span class="line"><span class="cl">--- a/runoob.php
</span></span><span class="line"><span class="cl">+++ b/runoob.php
</span></span><span class="line"><span class="cl">@@@ -1,3 -1,3 +1,4 @@@
</span></span><span class="line"><span class="cl">  &lt;?php
</span></span><span class="line"><span class="cl"> +echo 1<span class="p">;</span>
</span></span><span class="line"><span class="cl">+ <span class="nb">echo</span> <span class="s1">&#39;runoob&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  ?&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>在 Git 中，我们可以用 git add 要告诉 Git 文件冲突已经解决</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git status -s
</span></span><span class="line"><span class="cl">UU runoob.php
</span></span><span class="line"><span class="cl">$ git add runoob.php
</span></span><span class="line"><span class="cl">$ git status -s
</span></span><span class="line"><span class="cl">M  runoob.php
</span></span><span class="line"><span class="cl">$ git commit
</span></span><span class="line"><span class="cl"><span class="o">[</span>master 88afe0e<span class="o">]</span> Merge branch <span class="s1">&#39;change_site&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>现在我们成功解决了合并中的冲突，并提交了结果。</p>
<h2 id="git-查看提交历史">Git 查看提交历史<a hidden class="anchor" aria-hidden="true" href="#git-查看提交历史">#</a></h2>
<p>Git 提交历史一般常用两个命令：</p>
<ul>
<li><code>git log</code>：查看历史提交记录。</li>
<li><code>git blame &lt;file&gt;</code>：以列表形式查看指定文件的历史修改记录。</li>
</ul>
<h3 id="git-log">git log<a hidden class="anchor" aria-hidden="true" href="#git-log">#</a></h3>
<p>在使用 Git 提交了若干更新之后，又或者克隆了某个项目，想回顾下提交历史，我们可以使用 <code>git log</code> 命令查看。</p>
<p>针对我们前一章节的操作，使用 <code>git log</code> 命令列出历史提交记录如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git log
</span></span><span class="line"><span class="cl">commit d5e9fc2c811e0ca2b2d28506ef7dc14171a207d9 <span class="o">(</span>HEAD -&gt; master<span class="o">)</span>
</span></span><span class="line"><span class="cl">Merge: c68142b <span class="m">7774248</span>
</span></span><span class="line"><span class="cl">Author: runoob &lt;test@runoob.com&gt;
</span></span><span class="line"><span class="cl">Date:   Fri May <span class="m">3</span> 15:55:58 <span class="m">2019</span> +0800
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">    Merge branch <span class="s1">&#39;change_site&#39;</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">commit c68142b562c260c3071754623b08e2657b4c6d5b
</span></span><span class="line"><span class="cl">Author: runoob &lt;test@runoob.com&gt;
</span></span><span class="line"><span class="cl">Date:   Fri May <span class="m">3</span> 15:52:12 <span class="m">2019</span> +0800
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">    修改代码
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">commit 777424832e714cf65d3be79b50a4717aea51ab69 <span class="o">(</span>change_site<span class="o">)</span>
</span></span><span class="line"><span class="cl">Author: runoob &lt;test@runoob.com&gt;
</span></span><span class="line"><span class="cl">Date:   Fri May <span class="m">3</span> 15:49:26 <span class="m">2019</span> +0800
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">    changed the runoob.php
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">commit c1501a244676ff55e7cccac1ecac0e18cbf6cb00
</span></span><span class="line"><span class="cl">Author: runoob &lt;test@runoob.com&gt;
</span></span><span class="line"><span class="cl">Date:   Fri May <span class="m">3</span> 15:35:32 <span class="m">2019</span> +0800
</span></span></code></pre></td></tr></table>
</div>
</div><p>我们可以用 <strong>&ndash;oneline</strong> 选项来查看历史记录的简洁的版本。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git log --oneline
</span></span><span class="line"><span class="cl">d5e9fc2 <span class="o">(</span>HEAD -&gt; master<span class="o">)</span> Merge branch <span class="s1">&#39;change_site&#39;</span>
</span></span><span class="line"><span class="cl">c68142b 修改代码
</span></span><span class="line"><span class="cl"><span class="m">7774248</span> <span class="o">(</span>change_site<span class="o">)</span> changed the runoob.php
</span></span><span class="line"><span class="cl">c1501a2 removed test.txt、add runoob.php
</span></span><span class="line"><span class="cl">3e92c19 add test.txt
</span></span><span class="line"><span class="cl">3b58100 第一次版本提交
</span></span></code></pre></td></tr></table>
</div>
</div><p>这告诉我们的是，此项目的开发历史。</p>
<p>我们还可以用 <strong>&ndash;graph</strong> 选项，查看历史中什么时候出现了分支、合并。以下为相同的命令，开启了拓扑图选项：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git log --graph
</span></span><span class="line"><span class="cl">*   d5e9fc2 <span class="o">(</span>HEAD -&gt; master<span class="o">)</span> Merge branch <span class="s1">&#39;change_site&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">|</span><span class="se">\ </span> 
</span></span><span class="line"><span class="cl"><span class="p">|</span> * <span class="m">7774248</span> <span class="o">(</span>change_site<span class="o">)</span> changed the runoob.php
</span></span><span class="line"><span class="cl">* <span class="p">|</span> c68142b 修改代码
</span></span><span class="line"><span class="cl"><span class="p">|</span>/  
</span></span><span class="line"><span class="cl">* c1501a2 removed test.txt、add runoob.php
</span></span><span class="line"><span class="cl">* 3e92c19 add test.txt
</span></span><span class="line"><span class="cl">* 3b58100 第一次版本提交
</span></span></code></pre></td></tr></table>
</div>
</div><p>现在我们可以更清楚明了地看到何时工作分叉、又何时归并。</p>
<p>你也可以用 <strong>&ndash;reverse</strong> 参数来逆向显示所有日志。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git log --reverse --oneline
</span></span><span class="line"><span class="cl">3b58100 第一次版本提交
</span></span><span class="line"><span class="cl">3e92c19 add test.txt
</span></span><span class="line"><span class="cl">c1501a2 removed test.txt、add runoob.php
</span></span><span class="line"><span class="cl"><span class="m">7774248</span> <span class="o">(</span>change_site<span class="o">)</span> changed the runoob.php
</span></span><span class="line"><span class="cl">c68142b 修改代码
</span></span><span class="line"><span class="cl">d5e9fc2 <span class="o">(</span>HEAD -&gt; master<span class="o">)</span> Merge branch <span class="s1">&#39;change_site&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>如果只想查找指定用户的提交日志可以使用命令：<code>git log --author</code> , 例如，比方说我们要找 Git 源码中 Linus 提交的部分：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git log --author<span class="o">=</span>Linus --oneline -5
</span></span><span class="line"><span class="cl">81b50f3 Move <span class="s1">&#39;builtin-*&#39;</span> into a <span class="s1">&#39;builtin/&#39;</span> subdirectory
</span></span><span class="line"><span class="cl">3bb7256 make <span class="s2">&#34;index-pack&#34;</span> a built-in
</span></span><span class="line"><span class="cl">377d027 make <span class="s2">&#34;git pack-redundant&#34;</span> a built-in
</span></span><span class="line"><span class="cl">b532581 make <span class="s2">&#34;git unpack-file&#34;</span> a built-in
</span></span><span class="line"><span class="cl">112dd51 make <span class="s2">&#34;mktag&#34;</span> a built-in
</span></span></code></pre></td></tr></table>
</div>
</div><p>如果你要指定日期，可以执行几个选项：<strong>&ndash;since</strong> 和 <strong>&ndash;before</strong>，但是你也可以用 <strong>&ndash;until</strong> 和 <strong>&ndash;after</strong>。</p>
<p>例如，如果我要看 Git 项目中三周前且在四月十八日之后的所有提交，我可以执行这个（我还用了 <strong>&ndash;no-merges</strong> 选项以隐藏合并提交）：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git log --oneline --before<span class="o">={</span>3.weeks.ago<span class="o">}</span> --after<span class="o">={</span>2010-04-18<span class="o">}</span> --no-merges
</span></span><span class="line"><span class="cl">5469e2d Git 1.7.1-rc2
</span></span><span class="line"><span class="cl">d43427d Documentation/remote-helpers: Fix typos and improve language
</span></span><span class="line"><span class="cl">272a36b Fixup: Second argument may be any arbitrary string
</span></span><span class="line"><span class="cl">b6c8d2d Documentation/remote-helpers: Add invocation section
</span></span><span class="line"><span class="cl">5ce4f4e Documentation/urls: Rewrite to accomodate transport::address
</span></span><span class="line"><span class="cl">00b84e9 Documentation/remote-helpers: Rewrite description
</span></span><span class="line"><span class="cl">03aa87e Documentation: Describe other situations where -z affects git diff
</span></span><span class="line"><span class="cl">77bc694 rebase-interactive: silence warning when no commits rewritten
</span></span><span class="line"><span class="cl">636db2c t3301: add tests to use --format<span class="o">=</span><span class="s2">&#34;%N&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>更多 git log 命令可查看：http://git-scm.com/docs/git-log</p>
<h3 id="git-blame">git blame<a hidden class="anchor" aria-hidden="true" href="#git-blame">#</a></h3>
<p>如果要查看指定文件的修改记录可以使用 <code>git blame</code> 命令，格式如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">git blame &lt;file&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>git blame 命令是以列表形式显示修改记录，如下实例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git blame README 
</span></span><span class="line"><span class="cl">^d2097aa <span class="o">(</span>tianqixin 2020-08-25 14:59:25 +0800 1<span class="o">)</span> <span class="c1"># Runoob Git 测试</span>
</span></span><span class="line"><span class="cl">db9315b0 <span class="o">(</span>runoob    2020-08-25 16:00:23 +0800 2<span class="o">)</span> <span class="c1"># 菜鸟教程 </span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="git-标签">Git 标签<a hidden class="anchor" aria-hidden="true" href="#git-标签">#</a></h2>
<p>如果你达到一个重要的阶段，并希望永远记住那个特别的提交快照，你可以使用 <code>git tag</code> 给它打上标签。</p>
<p>比如说，我们想为我们的 runoob 项目发布一个&quot;1.0&quot;版本。 我们可以用 <code>git tag -a v1.0</code> 命令给最新一次提交打上（HEAD）&ldquo;v1.0&quot;的标签。</p>
<p><strong>-a</strong> 选项意为&quot;创建一个带注解的标签&rdquo;。 不用 -a 选项也可以执行的，但它不会记录这标签是啥时候打的，谁打的，也不会让你添加个标签的注解。 我推荐一直创建带注解的标签。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git tag -a v1.0 
</span></span></code></pre></td></tr></table>
</div>
</div><p>当你执行 <code>git tag -a</code> 命令时，Git 会打开你的编辑器，让你写一句标签注解，就像你给提交写注解一样。</p>
<p>现在，注意当我们执行 <code>git log --decorate</code> 时，我们可以看到我们的标签了：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git log --decorate
</span></span><span class="line"><span class="cl">*   d5e9fc2 <span class="o">(</span>HEAD -&gt; master<span class="o">)</span> Merge branch <span class="s1">&#39;change_site&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">|</span><span class="se">\ </span> 
</span></span><span class="line"><span class="cl"><span class="p">|</span> * <span class="m">7774248</span> <span class="o">(</span>change_site<span class="o">)</span> changed the runoob.php
</span></span><span class="line"><span class="cl">* <span class="p">|</span> c68142b 修改代码
</span></span><span class="line"><span class="cl"><span class="p">|</span>/  
</span></span><span class="line"><span class="cl">* c1501a2 removed test.txt、add runoob.php
</span></span><span class="line"><span class="cl">* 3e92c19 add test.txt
</span></span><span class="line"><span class="cl">* 3b58100 第一次版本提交
</span></span></code></pre></td></tr></table>
</div>
</div><p>如果我们忘了给某个提交打标签，又将它发布了，我们可以给它追加标签。</p>
<p>例如，假设我们发布了提交 85fc7e7(上面实例最后一行)，但是那时候忘了给它打标签。 我们现在也可以：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git tag -a v0.9 85fc7e7
</span></span><span class="line"><span class="cl">$ git log --oneline --decorate --graph
</span></span><span class="line"><span class="cl">*   d5e9fc2 <span class="o">(</span>HEAD -&gt; master<span class="o">)</span> Merge branch <span class="s1">&#39;change_site&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">|</span><span class="se">\ </span> 
</span></span><span class="line"><span class="cl"><span class="p">|</span> * <span class="m">7774248</span> <span class="o">(</span>change_site<span class="o">)</span> changed the runoob.php
</span></span><span class="line"><span class="cl">* <span class="p">|</span> c68142b 修改代码
</span></span><span class="line"><span class="cl"><span class="p">|</span>/  
</span></span><span class="line"><span class="cl">* c1501a2 removed test.txt、add runoob.php
</span></span><span class="line"><span class="cl">* 3e92c19 add test.txt
</span></span><span class="line"><span class="cl">* 3b58100 <span class="o">(</span>tag: v0.9<span class="o">)</span> 第一次版本提交
</span></span></code></pre></td></tr></table>
</div>
</div><p>如果我们要查看所有标签可以使用以下命令：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ git tag
</span></span><span class="line"><span class="cl">v0.9
</span></span><span class="line"><span class="cl">v1.0
</span></span></code></pre></td></tr></table>
</div>
</div><p>指定标签信息命令：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">git tag -a &lt;tagname&gt; -m &#34;runoob.com标签&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><p>PGP签名标签命令：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">git tag -s &lt;tagname&gt; -m &#34;runoob.com标签&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="git-远程仓库github">Git 远程仓库（GitHub）<a hidden class="anchor" aria-hidden="true" href="#git-远程仓库github">#</a></h2>
<p>目前我们使用到的 Git 命令都是在本地执行，如果你想通过 Git 分享你的代码或者与其他开发人员合作。 你就需要将数据放到一台其他开发人员能够连接的服务器上。</p>
<p>本例使用了 Github 作为远程仓库，你可以先阅读我们的 <a href="https://www.runoob.com/w3cnote/git-guide.html">Github 简明教程。</a></p>
<p><img alt="Git-push-command" loading="lazy" src="./assets/Git-push-command.jpg"></p>
<h3 id="添加远程库">添加远程库<a hidden class="anchor" aria-hidden="true" href="#添加远程库">#</a></h3>
<p>要添加一个新的远程仓库，可以指定一个简单的名字，以便将来引用,命令格式如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">git remote add <span class="o">[</span>shortname<span class="o">]</span> <span class="o">[</span>url<span class="o">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>本例以 Github 为例作为远程仓库，如果你没有 Github 可以在官网 <a href="https://github.com/">https://github.com/</a> 注册。</p>
<p>由于你的本地 Git 仓库和 GitHub 仓库之间的传输是通过 SSH 加密的，所以我们需要配置验证信息：</p>
<p>使用以下命令生成 SSH Key：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ ssh-keygen -t rsa -C <span class="s2">&#34;youremail@example.com&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>后面的 <em><a href="mailto:your_email@youremail.com">your_email@youremail.com</a></em> 改为你在 Github 上注册的邮箱，之后会要求确认路径和输入密码，我们这使用默认的一路回车就行。</p>
<p>成功的话会在 <code>~/</code> 下生成 <code>.ssh</code> 文件夹，进去，打开 <strong>id_rsa.pub</strong>，复制里面的 <strong>key</strong>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ ssh-keygen -t rsa -C <span class="s2">&#34;429240967@qq.com&#34;</span>
</span></span><span class="line"><span class="cl">Generating public/private rsa key pair.
</span></span><span class="line"><span class="cl">Enter file in which to save the key <span class="o">(</span>/Users/tianqixin/.ssh/id_rsa<span class="o">)</span>: 
</span></span><span class="line"><span class="cl">Enter passphrase <span class="o">(</span>empty <span class="k">for</span> no passphrase<span class="o">)</span>:    <span class="c1"># 直接回车</span>
</span></span><span class="line"><span class="cl">Enter same passphrase again:                   <span class="c1"># 直接回车</span>
</span></span><span class="line"><span class="cl">Your identification has been saved in /Users/tianqixin/.ssh/id_rsa.
</span></span><span class="line"><span class="cl">Your public key has been saved in /Users/tianqixin/.ssh/id_rsa.pub.
</span></span><span class="line"><span class="cl">The key fingerprint is:
</span></span><span class="line"><span class="cl">SHA256:MDKVidPTDXIQoJwoqUmI4LBAsg5XByBlrOEzkxrwARI 429240967@qq.com
</span></span><span class="line"><span class="cl">The key<span class="err">&#39;</span>s randomart image is:
</span></span><span class="line"><span class="cl">+---<span class="o">[</span>RSA 3072<span class="o">]</span>----+
</span></span><span class="line"><span class="cl"><span class="p">|</span>E*+.+<span class="o">=</span>**oo       <span class="p">|</span>
</span></span><span class="line"><span class="cl"><span class="p">|</span>%Oo+oo<span class="o">=</span>o. .      <span class="p">|</span>
</span></span><span class="line"><span class="cl"><span class="p">|</span>%**.o.o.         <span class="p">|</span>
</span></span><span class="line"><span class="cl"><span class="p">|</span>OO.  o o         <span class="p">|</span>
</span></span><span class="line"><span class="cl"><span class="p">|</span>+o+     S        <span class="p">|</span>
</span></span><span class="line"><span class="cl"><span class="p">|</span>.                <span class="p">|</span>
</span></span><span class="line"><span class="cl"><span class="p">|</span>                 <span class="p">|</span>
</span></span><span class="line"><span class="cl"><span class="p">|</span>                 <span class="p">|</span>
</span></span><span class="line"><span class="cl"><span class="p">|</span>                 <span class="p">|</span>
</span></span><span class="line"><span class="cl">+----<span class="o">[</span>SHA256<span class="o">]</span>-----+
</span></span></code></pre></td></tr></table>
</div>
</div><p>回到 github 上，进入 <strong>Account =&gt; Settings</strong>（账户配置）。</p>
<p><img alt="Account_settings" loading="lazy" src="./assets/Account_settings.png"></p>
<p>左边选择 <strong>SSH and GPG keys</strong>，然后点击 <strong>New SSH key</strong> 按钮。</p>
<p>![SSH and GPG keys](./assets/SSH and GPG keys.png)</p>
<p><em>title</em> 设置标题，可以随便填，<em>key</em> 粘贴在你电脑上生成的 <strong>key</strong>（ 上面生成的<code>~/.ssh/id_rsa.pub</code>文件内容），最后点击<strong>Add SSH key</strong>按钮添加。</p>
<p><img alt="add_key" loading="lazy" src="./assets/add_key.png"></p>
<p>添加成功后界面如下所示</p>
<p>![SSH and GPG keys](./assets/SSH and GPG keys.png)</p>
<p>为了验证是否成功，输入以下命令：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ ssh -T git@github.com
</span></span><span class="line"><span class="cl">The authenticity of host <span class="s1">&#39;github.com (52.74.223.119)&#39;</span> can<span class="s1">&#39;t be established.
</span></span></span><span class="line"><span class="cl"><span class="s1">RSA key fingerprint is SHA256:nThbg6kXUpJWGl7E1IGOCspRomTxdCARLviKw6E5SY8.
</span></span></span><span class="line"><span class="cl"><span class="s1">Are you sure you want to continue connecting (yes/no/[fingerprint])? yes                   # 输入 yes
</span></span></span><span class="line"><span class="cl"><span class="s1">Warning: Permanently added &#39;</span>github.com,52.74.223.119<span class="s1">&#39; (RSA) to the list of known hosts.
</span></span></span><span class="line"><span class="cl"><span class="s1">Hi tianqixin! You&#39;</span>ve successfully authenticated, but GitHub does not provide shell access. <span class="c1"># 成功信息</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>以上命令说明我们已成功连上 Github。</p>
<p>之后点击 <strong>New repository</strong> 如下图所示：</p>
<p><img alt="New_repository" loading="lazy" src="./assets/New_repository.png"></p>
<p>之后在在 <strong>Repository name</strong> 填入 myblog（远程仓库名） ，其他保持默认设置，点击<strong>Create repository</strong>按钮，就成功地创建了一个新的Git仓库：</p>
<p><img alt="repository_name" loading="lazy" src="./assets/repository_name.png"></p>
<p>创建成功后，显示如下信息：</p>
<p><img alt="created_repository" loading="lazy" src="./assets/created_repository.png"></p>
<p>以上信息告诉我们可以从这个仓库克隆出新的仓库，也可以把本地仓库的内容推送到 GitHub 仓库。</p>
<p>现在，我们根据 GitHub 的提示，在本地的仓库下运行命令：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ mkdir myblog		                        <span class="c1"># 创建测试目录</span>
</span></span><span class="line"><span class="cl">$ <span class="nb">cd</span> myblog/                    		    <span class="c1"># 进入测试目录</span>
</span></span><span class="line"><span class="cl">$ <span class="nb">echo</span> <span class="s2">&#34;# Git 测试&#34;</span> &gt;&gt; README.md				<span class="c1"># 创建 README.md 文件并写入内容</span>
</span></span><span class="line"><span class="cl">$ ls                                        <span class="c1"># 查看目录下的文件</span>
</span></span><span class="line"><span class="cl">README
</span></span><span class="line"><span class="cl">$ git init                                  <span class="c1"># 初始化</span>
</span></span><span class="line"><span class="cl">$ git add README.md                         <span class="c1"># 添加文件</span>
</span></span><span class="line"><span class="cl">$ git commit -m <span class="s2">&#34;添加 README.md 文件&#34;</span>        <span class="c1"># 提交并备注信息</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>master <span class="o">(</span>root-commit<span class="o">)</span> 0205aab<span class="o">]</span> 添加 README.md 文件
</span></span><span class="line"><span class="cl"> <span class="m">1</span> file changed, <span class="m">1</span> insertion<span class="o">(</span>+<span class="o">)</span>
</span></span><span class="line"><span class="cl"> create mode <span class="m">100644</span> README.md
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 提交到 Github</span>
</span></span><span class="line"><span class="cl">$ git remote add origin git@github.com:Ryukarin/myblog.git
</span></span><span class="line"><span class="cl">$ git push -u origin master
</span></span></code></pre></td></tr></table>
</div>
</div><p>以下命令请根据你在 Github 成功创建新仓库的地方复制，而不是根据我提供的命令，因为我们的 Github 用户名不一样，仓库名也不一样。</p>
<p>接下来我们返回 Github 创建的仓库，就可以看到文件已上传到 Github上：</p>
<p><img alt="push" loading="lazy" src="./assets/push.png"></p>
<h3 id="查看当前的远程库">查看当前的远程库<a hidden class="anchor" aria-hidden="true" href="#查看当前的远程库">#</a></h3>
<p>要查看当前配置有哪些远程仓库，可以用命令：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">git remote
</span></span></code></pre></td></tr></table>
</div>
</div><p>实例</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git remote
</span></span><span class="line"><span class="cl">origin
</span></span><span class="line"><span class="cl">$ git remote -v
</span></span><span class="line"><span class="cl">origin	git@github.com:Ryukarin/myblog.git <span class="o">(</span>fetch<span class="o">)</span>
</span></span><span class="line"><span class="cl">origin	git@github.com:Ryukarin/myblog.git <span class="o">(</span>push<span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>执行时加上 <strong>-v</strong> 参数，你还可以看到每个别名的实际链接地址。</p>
<h3 id="提取远程仓库">提取远程仓库<a hidden class="anchor" aria-hidden="true" href="#提取远程仓库">#</a></h3>
<p>Git 有两个命令用来提取远程仓库的更新。</p>
<ol>
<li>从远程仓库下载新分支与数据：</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">git fetch
</span></span></code></pre></td></tr></table>
</div>
</div><p>该命令执行完后需要执行 <code>git merge</code> 远程分支到你所在的分支。</p>
<ol start="2">
<li>从远端仓库提取数据并尝试合并到当前分支：</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">git merge
</span></span></code></pre></td></tr></table>
</div>
</div><p>该命令就是在执行 <code>git fetch</code> 之后紧接着执行 <code>git merge</code> 远程分支到你所在的任意分支。</p>
<p>假设你配置好了一个远程仓库，并且你想要提取更新的数据，你可以首先执行 <code>git fetch [alias]</code> 告诉 Git 去获取它有你没有的数据，然后你可以执行 <code>git merge [alias]/[branch]</code> 以将服务器上的任何更新（假设有人这时候推送到服务器了）合并到你的当前分支。</p>
<p>接下来我们在 Github 上点击 <strong>README.md</strong> 并在线修改它:</p>
<p><img alt="edit readme" loading="lazy" src="./assets/edit_readme.png"></p>
<p>修改好 <strong>README.md</strong> 之后，点击底部的 <strong>Commit changes</strong> 按钮。</p>
<p><img alt="Commit changes" loading="lazy" src="./assets/Commit_changes.png"></p>
<p>然后我们在本地更新修改。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git fetch origin
</span></span><span class="line"><span class="cl">remote: Counting objects: 3, <span class="k">done</span>.
</span></span><span class="line"><span class="cl">remote: Compressing objects: 100% <span class="o">(</span>2/2<span class="o">)</span>, <span class="k">done</span>.
</span></span><span class="line"><span class="cl">remote: Total <span class="m">3</span> <span class="o">(</span>delta 0<span class="o">)</span>, reused <span class="m">0</span> <span class="o">(</span>delta 0<span class="o">)</span>, pack-reused <span class="m">0</span>
</span></span><span class="line"><span class="cl">Unpacking objects: 100% <span class="o">(</span>3/3<span class="o">)</span>, <span class="k">done</span>.
</span></span><span class="line"><span class="cl">From github.com:Ryukarin/myblog
</span></span><span class="line"><span class="cl">   0205aab..febd8ed  master     -&gt; origin/main
</span></span></code></pre></td></tr></table>
</div>
</div><p>以上信息&quot;0205aab..febd8ed master -&gt; origin/master&quot; 说明 main 分支已被更新，我们可以使用以下命令将更新同步到本地：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git merge origin/main
</span></span><span class="line"><span class="cl">Updating 0205aab..febd8ed
</span></span><span class="line"><span class="cl">Fast-forward
</span></span><span class="line"><span class="cl"> README.md <span class="p">|</span> <span class="m">1</span> +
</span></span><span class="line"><span class="cl"> <span class="m">1</span> file changed, <span class="m">1</span> insertion<span class="o">(</span>+<span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>查看 README.md 文件内容：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ cat README.md 
</span></span><span class="line"><span class="cl"><span class="c1"># Git 测试</span>
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl"><span class="c1">## 第一次修改内容（二级标题）</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="推送到远程仓库">推送到远程仓库<a hidden class="anchor" aria-hidden="true" href="#推送到远程仓库">#</a></h3>
<p>推送你的新分支与数据到某个远端仓库命令：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">git push <span class="o">[</span>alias<span class="o">]</span> <span class="o">[</span>branch<span class="o">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>以上命令将你的 [branch] 分支推送成为 [alias] 远程仓库上的 [branch] 分支，实例如下。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ touch test.txt      <span class="c1"># 添加文件</span>
</span></span><span class="line"><span class="cl">$ git add test.txt 
</span></span><span class="line"><span class="cl">$ git commit -m <span class="s2">&#34;添加到远程&#34;</span>
</span></span><span class="line"><span class="cl">master 69e702d<span class="o">]</span> 添加到远程
</span></span><span class="line"><span class="cl"> <span class="m">1</span> file changed, <span class="m">0</span> insertions<span class="o">(</span>+<span class="o">)</span>, <span class="m">0</span> deletions<span class="o">(</span>-<span class="o">)</span>
</span></span><span class="line"><span class="cl"> create mode <span class="m">100644</span> test.txt
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ git push origin master    <span class="c1"># 推送到 Github</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>重新回到我们的 Github 仓库，可以看到文件已经提交上来了：</p>
<p><img alt="add remote" loading="lazy" src="./assets/add_remote.png"></p>
<h3 id="删除远程仓库">删除远程仓库<a hidden class="anchor" aria-hidden="true" href="#删除远程仓库">#</a></h3>
<p>删除远程仓库你可以使用命令：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">git remote rm <span class="o">[</span>别名<span class="o">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>实例</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git remote -v
</span></span><span class="line"><span class="cl">origin    git@github.com:Ryukarin/myblog.git <span class="o">(</span>fetch<span class="o">)</span>
</span></span><span class="line"><span class="cl">origin    git@github.com:Ryukarin/myblog.git <span class="o">(</span>push<span class="o">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 添加仓库 origin2</span>
</span></span><span class="line"><span class="cl">$ git remote add origin2 git@github.com:Ryukarin/myblog.git
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ git remote -v
</span></span><span class="line"><span class="cl">origin    git@github.com:Ryukarin/myblog.git <span class="o">(</span>fetch<span class="o">)</span>
</span></span><span class="line"><span class="cl">origin    git@github.com:Ryukarin/myblog.git <span class="o">(</span>push<span class="o">)</span>
</span></span><span class="line"><span class="cl">origin2    git@github.com:Ryukarin/myblog.git <span class="o">(</span>fetch<span class="o">)</span>
</span></span><span class="line"><span class="cl">origin2    git@github.com:Ryukarin/myblog.git <span class="o">(</span>push<span class="o">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 删除仓库 origin2</span>
</span></span><span class="line"><span class="cl">$ git remote rm origin2
</span></span><span class="line"><span class="cl">$ git remote -v
</span></span><span class="line"><span class="cl">origin    git@github.com:Ryukarin/myblog.git <span class="o">(</span>fetch<span class="o">)</span>
</span></span><span class="line"><span class="cl">origin    git@github.com:Ryukarin/myblog.git <span class="o">(</span>push<span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>::: tip 码云（Gitee）</p>
<p>大家都知道国内访问 Github 速度比较慢，很影响我们的使用。</p>
<p>如果你希望体验到 Git 飞一般的速度，可以使用国内的 Git 托管服务——<a href="https://gitee.com/?utm_source=remote_blog_cnjc">Gitee（gitee.com）</a>。</p>
<p>Gitee 提供免费的 Git 仓库，还集成了代码质量检测、项目演示等功能。对于团队协作开发，Gitee 还提供了项目管理、代码托管、文档管理的服务，5 人以下小团队免费。</p>
<p>使用方法和  Github 大同小异，具体就不展开说了。</p>
<p>:::</p>
<h2 id="git-服务器搭建">Git 服务器搭建<a hidden class="anchor" aria-hidden="true" href="#git-服务器搭建">#</a></h2>
<p>前面我们远程仓库使用了 Github，Github 公开的项目是免费的，2019 年开始 Github 私有存储库也可以无限制使用。</p>
<p>这当然我们也可以自己搭建一台 Git 服务器作为私有仓库使用。</p>
<p>接下来我们将以 Centos 为例搭建 Git 服务器。</p>
<h3 id="安装git">安装Git<a hidden class="anchor" aria-hidden="true" href="#安装git">#</a></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel perl-devel
</span></span><span class="line"><span class="cl">$ yum install git
</span></span></code></pre></td></tr></table>
</div>
</div><p>接下来我们 创建一个git用户组和用户，用来运行git服务：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ groupadd git
</span></span><span class="line"><span class="cl">$ useradd git -g git
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="创建证书登录">创建证书登录<a hidden class="anchor" aria-hidden="true" href="#创建证书登录">#</a></h3>
<p>收集所有需要登录的用户的公钥，公钥位于id_rsa.pub文件中，把我们的公钥导入到<code>/home/git/.ssh/authorized_keys</code>文件里，一行一个。</p>
<p>如果没有该文件创建它：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ <span class="nb">cd</span> /home/git/
</span></span><span class="line"><span class="cl">$ mkdir .ssh
</span></span><span class="line"><span class="cl">$ chmod <span class="m">755</span> .ssh
</span></span><span class="line"><span class="cl">$ touch .ssh/authorized_keys
</span></span><span class="line"><span class="cl">$ chmod <span class="m">644</span> .ssh/authorized_keys
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="初始化git仓库">初始化Git仓库<a hidden class="anchor" aria-hidden="true" href="#初始化git仓库">#</a></h3>
<p>首先我们选定一个目录作为 Git 仓库，假定是 <code>/home/gitrepo/runoob.git</code>，在 <code>/home/gitrepo</code> 目录下输入命令：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ <span class="nb">cd</span> /home
</span></span><span class="line"><span class="cl">$ mkdir gitrepo
</span></span><span class="line"><span class="cl">$ chown git:git gitrepo/
</span></span><span class="line"><span class="cl">$ <span class="nb">cd</span> gitrepo
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ git init --bare runoob.git
</span></span><span class="line"><span class="cl">Initialized empty Git repository in /home/gitrepo/runoob.git/
</span></span></code></pre></td></tr></table>
</div>
</div><p>以上命令 Git 创建一个空仓库，服务器上的Git仓库通常都以 .git 结尾。然后，把仓库所属用户改为git：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ chown -R git:git runoob.git
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="克隆仓库">克隆仓库<a hidden class="anchor" aria-hidden="true" href="#克隆仓库">#</a></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git clone git@192.168.45.4:/home/gitrepo/runoob.git
</span></span><span class="line"><span class="cl">Cloning into <span class="s1">&#39;runoob&#39;</span>...
</span></span><span class="line"><span class="cl">warning: You appear to have cloned an empty repository.
</span></span><span class="line"><span class="cl">Checking connectivity... <span class="k">done</span>.
</span></span></code></pre></td></tr></table>
</div>
</div><p>192.168.45.4 为 Git 所在服务器 ip ，你需要将其修改为你自己的 Git 服务 ip。</p>
<p>这样我们的 Git 服务器安装就完成。</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:28536/tags/git/">Git</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="http://localhost:28536/posts/it/ftp/">
    <span class="title">« 上一页</span>
    <br>
    <span>FTP笔记</span>
  </a>
  <a class="next" href="http://localhost:28536/posts/it/readme/">
    <span class="title">下一页 »</span>
    <br>
    <span>IT 基础</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>© 2024 <a href="https://lhx11187.github.io">Lucky&rsquo;s blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = '复制';

        function copyingDone() {
            copybutton.innerHTML = '已复制！';
            setTimeout(() => {
                copybutton.innerHTML = '复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
